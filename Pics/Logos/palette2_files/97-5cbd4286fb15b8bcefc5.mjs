(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[97,"CarouselCommon"],{"/mzO":function(e,t,a){a.d(t,"a",(function(){return s}));var n=a("q1tI"),i=a.n(n),o=a("Ye/N"),r=a("n6mq");function s({commentsDisabled:e,onCommentChange:t,onPhotoChange:a,photosDisabled:n,isManagedView:s,isNoTitle:d}){const l=(()=>s?6:d?0:3)();return i.a.createElement(r.d,null,!d&&i.a.createElement(r.l,null),i.a.createElement(r.d,{md:{display:"flex"},justifyContent:"between",paddingX:s?0:4,paddingY:l},!s&&!d&&i.a.createElement(r.d,{xs:{column:12},md:{column:3},paddingY:2},i.a.createElement(r.R,{size:"md"},o.a._("Comment and Photo Permissions"))),i.a.createElement(r.d,{xs:{column:12},md:{column:s?12:8}},i.a.createElement(r.d,{paddingY:1,display:"flex",alignItems:"center"},i.a.createElement(r.N,{onChange:t,id:"CommentSwitch",switched:!e}),i.a.createElement(r.d,{paddingX:2},i.a.createElement(r.t,{htmlFor:"CommentSwitch"},i.a.createElement(r.R,{size:"md"},o.a._("Allow people to comment","Label for toggling comments on a pin in pin edit form","Label for toggling comments on a pin in pin edit form"))))),i.a.createElement(r.d,{paddingY:1,alignItems:"center",display:"flex"},i.a.createElement(r.N,{onChange:a,id:"PhotoSwitch",switched:!n}),i.a.createElement(r.d,{paddingX:2},i.a.createElement(r.t,{htmlFor:"PhotoSwitch"},i.a.createElement(r.R,{size:"md"},o.a._("Allow people to upload photos","Label for toggling photos on a pin in pin edit form","Label for toggling photos on a pin in pin edit form"))))))))}},"5S2N":function(e,t,a){var n=a("q1tI"),i=a.n(n),o=a("/MKj"),r=a("9WJf"),s=a("VJm5"),d=a("rSLd"),l=a("xOLo"),c=a("BkRI"),h=a.n(c),u=a("/mzO"),p=a("JW66"),m=a("eOdZ"),g=a("5FNA"),b=a("Wer7");var E=a("Sihc"),f=a("Y+p1"),C=a.n(f),y=a("Ye/N"),_=a("TiQD"),S=a("GBVV"),w=a("4cpq"),v=a("CvCA"),x=a("nGHF"),I=a("n6mq");function M(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const P=Object(x.c)(class extends i.a.PureComponent{constructor(...e){super(...e),M(this,"state",{deleting:!1}),M(this,"unmounted",!1),M(this,"handleConfirm",()=>{if(this.state.deleting)return;const{onDeletePin:e}=this.props;this.setState({deleting:!0}),e().then(()=>this.handleDeleteDidComplete()).catch(e=>this.handleDeleteDidComplete(e))}),M(this,"handleDeleteDidComplete",e=>{const{toastManagerContext:t}=this.props;this.unmounted||this.setState({deleting:!1}),e||t.showToast(({onHide:e})=>i.a.createElement(v.a,{onHide:e,text:y.a._("Pin deleted!","User deleted their pin","User deleted their pin")}))})}componentWillUnmount(){this.unmounted=!0}render(){const{onDismiss:e}=this.props,{deleting:t}=this.state;return i.a.createElement(_.b,{heading:y.a._("Are you sure?","Confirm the user wants to delete the pin","Confirm the user wants to delete the pin"),accessibilityModalLabel:y.a._("Are you sure you want to delete this pin?","Accessible label to confirm the user wants to delete the pin","Accessible label to confirm the user wants to delete the pin"),size:"sm",onDismiss:e,footer:i.a.createElement(I.d,{display:"flex",justifyContent:"end",marginStart:-1,marginEnd:-1},i.a.createElement(I.d,{paddingX:1},i.a.createElement(I.e,{onClick:e,text:y.a._("Cancel")})),i.a.createElement(I.d,{paddingX:1},i.a.createElement(w.a,{id:"confirm-delete-pin"},i.a.createElement(S.b,{color:"red",onClick:this.handleConfirm,text:y.a._("Delete Pin"),submitting:t}))))},i.a.createElement(I.d,{padding:4},i.a.createElement(I.R,null,y.a._("Once you delete a Pin, you can't undo it!"))))}});P.displayName="DeletePinConfirmation";var D=P,R=a("V711");function B({board:e={},canEdit:t,onBoardChange:a,onBoardCreate:n}){return i.a.createElement(I.d,{md:{display:"flex"},justifyContent:"between",paddingX:4,paddingY:3},i.a.createElement(I.d,{xs:{column:12},md:{column:3},paddingY:2},i.a.createElement(I.t,{htmlFor:"BoardPicker"},i.a.createElement(I.R,{size:"md"},y.a._("Board")))),t?i.a.createElement(I.d,{xs:{column:12},md:{column:8}},i.a.createElement(R.a,{id:"BoardPicker",board:e,onBoardChosen:a,onBoardCreate:n})):e.name&&i.a.createElement(I.d,{xs:{column:12},md:{column:8},paddingY:2},i.a.createElement(I.R,{size:"md",weight:"bold"},e.name)))}var k=a("TSYQ"),j=a.n(k),T=a("JKZO"),L=a("Q7uW"),O=a("/5zs"),A=a("U4JR"),F=a("pLLR");function N(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const U=4;var V=Object(F.e)(class extends i.a.Component{constructor(...e){super(...e),N(this,"state",{focused:!1}),N(this,"suggestionAnchorRef",i.a.createRef()),N(this,"setRef",e=>this.textAreaRef=e),N(this,"handleBlur",e=>{this.setState({focused:!1});const{onBlur:t}=this.props;t&&t(e)}),N(this,"handleFocus",e=>{this.setState({focused:!0});const{onFocus:t}=this.props;t&&t(e)}),N(this,"handleChange",({text:e,mentions:t})=>{this.props.onDescriptionChange({value:e,userMentionTags:t})})}render(){const{canAddUserMentionTags:e,canEdit:t,description:a,errorMessage:n,initialMentions:o,label:r,placeholder:s,onDescriptionChange:d,requestContext:l}=this.props,{focused:c}=this.state,h=new O.c(l,"cp_mention_web").enabled();return i.a.createElement(i.a.Fragment,null,i.a.createElement(I.l,null),i.a.createElement(I.d,{md:{display:"flex"},justifyContent:"between",paddingX:4,paddingY:3},i.a.createElement(I.d,{xs:{column:12},md:{column:3},paddingY:2},i.a.createElement(I.t,{htmlFor:"DescriptionField"},i.a.createElement(I.R,{size:"md"},r))),t?i.a.createElement(I.d,{xs:{column:12},md:{column:8}},i.a.createElement(I.d,null,h&&e?i.a.createElement("div",{className:j()("DescriptionField",{DescriptionField__error:!!n,DescriptionField__focus:c}),id:"DescriptionField",ref:this.suggestionAnchorRef,role:"textbox"},i.a.createElement(T.a,{onAddMention:()=>{Object(A.a)(8905,{element:116,tag_type:1})},initialMentions:o,initialText:a,onBlur:this.handleBlur,onChange:this.handleChange,onFocus:this.handleFocus,onSearchMentionCancel:()=>{Object(A.a)(8908,{element:116,tag_type:1})},onSuggestionsPopoverOpen:()=>{Object(A.a)(8907,{element:116,tag_type:1})},maxSuggestions:U,placeholder:s})):i.a.createElement(I.S,{id:"DescriptionField",placeholder:s,value:a,onChange:({value:e})=>{d({value:e,userMentionTags:[]})},hasError:(n||"").length>0})),!!n&&i.a.createElement(I.d,{justifyContent:"center"},i.a.createElement(L.a,{errorMessage:n,htmlFor:"pin-edit-description"}))):i.a.createElement(I.d,{xs:{column:12},md:{column:8},paddingY:2},i.a.createElement(I.R,{size:"md",weight:"bold"},a))))}}),z=a("NXrh");function Q({board:e,canEdit:t,currentSection:a,onSectionChange:n,onSectionCreate:o,sectionId:r,sectionName:s}){const d=(null==e?void 0:e.id)?z.b:z.a;return i.a.createElement(I.d,{md:{display:"flex"},justifyContent:"between",paddingX:4,paddingY:3},i.a.createElement(I.d,{xs:{column:12},md:{column:3},paddingY:3},i.a.createElement(I.t,{htmlFor:"SectionPicker"},i.a.createElement(I.R,{size:"md"},y.a._("Section","label for editing a Pin's board section","label for editing a Pin's board section")))),t&&e?i.a.createElement(I.d,{xs:{column:12},md:{column:8}},i.a.createElement(d,{board:e,onSectionChange:n,selectedSectionId:r,selectedSectionName:s,onSectionCreate:o})):i.a.createElement(I.d,{xs:{column:12},md:{column:8},paddingY:2},i.a.createElement(I.R,{size:"md",weight:"bold"},a&&!(e||{}).is_collaborative?a.title:y.a._("No section","default dropdown option for selecting a board section on pin edit","default dropdown option for selecting a board section on pin edit"))))}var Y=a("v/Q4");const W=300,H=120,q=504;function X({apiErrorMessage:e,board:t,canEdit:a,commentsDisabled:n,description:o,disableDelete:r,handleBoardChange:s,handleBoardCreateClick:d,handleCommentChange:l,handleClickStoryPinPages:c,handlePhotoChange:h,handleSectionChange:p,handleSectionCreateClick:m,isProcessing:g,onClickDeleteButton:b,onHide:E,photosDisabled:f,pinResource:C,sectionId:S,sectionName:w,shouldDisableSave:v,shouldShowGenericUpdateError:x,title:M,triggerBoardAndSectionCreate:P}){var D,B,k;const j=Object(Y.a)(),T=null!==(D=C.data)&&void 0!==D?D:{},O=null!==(B=T.images&&T.images["474x"])&&void 0!==B?B:{},A=t.id?z.b:z.a;return i.a.createElement(_.b,{accessibilityModalLabel:y.a._("Edit your previously saved pin","editModal.editStoryPinModal.accessibilityLabel","Accessible label for edit previously saved story pin modal"),footer:i.a.createElement(I.d,{display:"flex",justifyContent:"between",marginEnd:-1,marginStart:-1},i.a.createElement(I.d,{"data-test-id":"delete-pin-button"},i.a.createElement(I.e,{disabled:r,onClick:b,text:y.a._("Delete","editModal.editStoryPinModal.deleteButton","Delete button for previously saved story pin")})),x&&i.a.createElement(I.d,{display:"flex",justifyContent:"center",marginStart:2},i.a.createElement(L.a,{errorMessage:e||y.a._("Sorry! There was an error editing your Pin.","editModal.editStoryPinModal.toastError","Toast for story pin edit error"),htmlFor:"pin-edit-generic-error"})),i.a.createElement(I.d,{display:"flex",justifyContent:"between",marginEnd:-2,marginStart:-2},i.a.createElement(I.d,{paddingX:2},i.a.createElement(I.e,{onClick:E,text:y.a._("Cancel","editModal.editStoryPinModal.cancelButton","Cancel button to not save edits to previously saved story pin")})),i.a.createElement(I.d,{"data-test-id":"edit-pin-save",paddingX:2},i.a.createElement(I.e,{color:"red",disabled:v,onClick:P(j),text:y.a._("Done","editModal.editStoryPinModal.doneButton","Done button to save edits to previously saved story pin")})))),heading:y.a._("Edit Pin","editModal.editStoryPinModal.heading","Edit a previously saved story pin"),onDismiss:E,size:"md"},!C.isLoaded||g?i.a.createElement(I.d,{paddingX:12,paddingY:9},i.a.createElement(I.K,{accessibilityLabel:y.a._("loading","Accessible label for the edit pin loading icon","Accessible label for the edit pin loading icon"),show:!0})):i.a.createElement(I.d,{display:"flex",justifyContent:"between",minHeight:W,paddingX:4},i.a.createElement(I.d,{direction:"column",justifyContent:"center",paddingX:4,column:3},i.a.createElement(I.x,{rounding:4,wash:!0,width:H},i.a.createElement(I.s,{alt:o,color:"#efefef",naturalHeight:O.height,naturalWidth:O.width,src:O.url}),i.a.createElement(I.d,{position:"absolute",left:!0,top:!0,padding:2},i.a.createElement(I.d,{color:"lightGray",opacity:.8,rounding:"pill",padding:2,display:"flex",alignItems:"center",justifyContent:"center"},i.a.createElement("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none"},i.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.625 0H4.375C3.892 0 3.5 0.392 3.5 0.875C3.5 1.358 3.892 1.75 4.375 1.75H7.625C9.074 1.7515 10.2485 2.926 10.25 4.375V7.625C10.25 8.1085 10.6415 8.5 11.125 8.5C11.6085 8.5 12 8.1085 12 7.625V4.375C12 1.9625 10.0375 0 7.625 0ZM7.25 3.25H1.5C0.6715 3.25 0 3.9215 0 4.75V10.5C0 11.3285 0.6715 12 1.5 12H7.25C8.0785 12 8.75 11.3285 8.75 10.5V4.75C8.75 3.9215 8.0785 3.25 7.25 3.25Z",fill:"#111111"})),i.a.createElement(I.d,{marginStart:1},i.a.createElement(I.R,{size:"sm",weight:"bold"},null===(k=T.story_pin_data)||void 0===k?void 0:k.page_count))))),i.a.createElement(I.d,{paddingY:2,width:H,"data-test-id":"edit-pages-button"},i.a.createElement(I.e,{onClick:c,size:"lg",text:y.a._("Edit Pages","editModal.editStoryPinModal.editPagesButton","Edit pages label for story pin creation entry point")}))),i.a.createElement(I.d,{column:9},i.a.createElement(I.d,{maxWidth:q,marginBottom:3,marginTop:-2},i.a.createElement(I.d,{paddingY:2},i.a.createElement(I.R,{size:"sm"},y.a._("Title","editModal.editStoryPinModal.titleLabel","Label for form input where users will input the title of their pin"))),i.a.createElement(I.d,{alignItems:"center",color:"lightGray",display:"flex",flex:"grow",justifyContent:"between",padding:4,rounding:4},i.a.createElement(I.R,{color:"gray",truncate:!0},M||""),i.a.createElement(I.q,{accessibilityLabel:y.a._("Lock","editModal.editStoryPinModal.lockIcon.accessibilityLabel","Label for the lock icon to show that editing a story pin title is locked"),color:"darkGray",icon:"lock"}))),i.a.createElement(I.d,{maxWidth:q,marginBottom:3},i.a.createElement(I.d,{paddingY:2},i.a.createElement(I.R,{size:"sm"},y.a._("Board","editModal.editStoryPinModal.boardLabel","Label for dropdown where users will choose their board"))),i.a.createElement(I.d,null,i.a.createElement(R.a,{board:t,id:"BoardPicker",isStoryPin:!0,onBoardChosen:s,onBoardCreate:d}))),i.a.createElement(I.d,{maxWidth:q,marginBottom:3},i.a.createElement(I.d,{paddingY:2},i.a.createElement(I.R,{size:"sm"},y.a._("Section","editModal.editStoryPinModal.sectionLabel","Label for dropdown where users will choose their section"))),i.a.createElement(I.d,null,i.a.createElement(A,{board:t,isStoryPin:!0,onSectionChange:p,onSectionCreate:m,selectedSectionId:S,selectedSectionName:w}))),T.can_delete_did_it_and_comments&&i.a.createElement(I.d,{maxWidth:q},i.a.createElement(I.d,{paddingY:2},i.a.createElement(I.R,{size:"sm"},y.a._("Comments and Photos Permissions","editModal.editStoryPinModal.commentsAndPhotosPermissionsLabel","Label for dropdown where users can toggle off permissions for comments and photos"))),i.a.createElement(I.d,null,i.a.createElement(u.a,{commentsDisabled:n,onCommentChange:l,onPhotoChange:h,photosDisabled:f,isNoTitle:!0}))))))}function G({canEdit:e,onTitleChange:t,title:a,errorMessage:n}){return i.a.createElement(i.a.Fragment,null,i.a.createElement(I.l,null),i.a.createElement(I.d,{md:{display:"flex"},justifyContent:"between",paddingX:4,paddingY:3},i.a.createElement(I.d,{xs:{column:12},md:{column:3},paddingY:2},i.a.createElement(I.t,{htmlFor:"TitleField"},i.a.createElement(I.R,{size:"md"},y.a._("Title","Label for editing title of pin","Label for editing title of pin")))),i.a.createElement(I.d,{xs:{column:12},md:{column:8}},e?i.a.createElement(i.a.Fragment,null,i.a.createElement(I.d,null,i.a.createElement(I.T,{hasError:(n||"").length>0,id:"TitleField",onChange:t,size:"lg",value:a})),!!n&&i.a.createElement(I.d,{justifyContent:"center"},i.a.createElement(L.a,{errorMessage:n,htmlFor:"pin-edit-title"}))):i.a.createElement(I.d,{xs:{column:12},md:{column:8},paddingY:2},i.a.createElement(I.R,{size:"md",weight:"bold"},a)))))}function K({onChangeWebsite:e,link:t,errorMessage:a}){return i.a.createElement(i.a.Fragment,null,i.a.createElement(I.l,null),i.a.createElement(I.d,{md:{display:"flex"},justifyContent:"between",paddingX:4,paddingY:3},i.a.createElement(I.d,{xs:{column:12},md:{column:3},paddingY:2},i.a.createElement(I.t,{htmlFor:"WebsiteField"},i.a.createElement(I.R,{size:"md"},y.a._("Website")))),i.a.createElement(I.d,{xs:{column:12},md:{column:8}},i.a.createElement(I.d,null,i.a.createElement(I.T,{hasError:(a||"").length>0,id:"WebsiteField",onChange:e,size:"lg",value:t})),!!a&&i.a.createElement(I.d,{justifyContent:"center"},i.a.createElement(L.a,{errorMessage:a,htmlFor:"pin-edit-website"})))))}var J=a("TN0d"),Z=a("NqRL"),$=a("Wrea"),ee=a("ZVWG"),te=a("bo/h"),ae=a("NjDU"),ne=a("zLLH"),ie=a("C0mq"),oe=a("eIuQ"),re=a("fArA"),se=a("c50B"),de=a("VqlB");function le(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ce(e){return Boolean(e&&e.trim().length)}function he(e,t){const a=ce(e),n=ce(t);return(a||n)&&e!==t}const ue=(e,t)=>({field_set_key:"detailed",id:e,preserve_component_state:t});t.a=Object(re.compose)(ie.a,Object(ne.c)({key:"pinResource",name:"PinResource",options:e=>ue(e.pinId,!0)}),F.e,Object(o.connect)((function(e,t){const{advertiser:a,viewer:n}=e;return n.isAuth&&a?{advertiser_id:a.id,...a.owner_user_id!==n.id?{advertiserOwnerUserId:a.owner_user_id,adminModeInfo:a.admin_mode_info}:{},viewer:n}:{viewer:n}}),e=>({invalidatePinResource:t=>e(Object(b.f)("PinResource",ue(t,!0))),changeBoardPinCount:t=>e(Object($.d)(t)),changeUserPinCount:t=>e(Object(ae.b)(t)),completeResourceFetch:t=>e(Object(b.b)("PinResource",ue(t.id,!1),t)),pinMoved:Object(re.bindActionCreators)(de.b,e)})))(class extends n.Component{constructor(...e){super(...e),le(this,"state",{board:this.props.pinResource.data&&this.props.pinResource.data.board||null,commentsDisabled:this.props.pinResource.data&&this.props.pinResource.data.comments_disabled||!1,description:this.props.pinResource.data&&this.props.pinResource.data.description.trim()||"",apiErrorMessage:null,link:this.props.pinResource.data&&this.props.pinResource.data.link||"",photosDisabled:this.props.pinResource.data&&this.props.pinResource.data.did_it_disabled||!1,sectionId:this.props.pinResource.data&&this.props.pinResource.data.section&&this.props.pinResource.data.section.id||null,sectionName:this.props.pinResource.data&&this.props.pinResource.data.section&&this.props.pinResource.data.section.title||null,showDeleteConfirmation:!1,carousel_data:this.props.pinResource.data&&this.props.pinResource.data.carousel_data||null,title:this.props.pinResource.data&&this.props.pinResource.data.title||"",userNote:this.props.pinResource.data&&this.props.pinResource.data.unified_user_note&&this.props.pinResource.data.unified_user_note.trim()||"",isProcessing:!1,currentIndex:void 0!==this.props.carouselSlotCurrentIndex?this.props.carouselSlotCurrentIndex:this.props.pinResource.data&&this.props.pinResource.data.carousel_data&&this.props.pinResource.data.carousel_data.index||0,shouldApplyTextToAll:!1,shouldDisableSave:!1,shouldShowCarouselSliders:!1,shouldShowValidationTitleError:!1,shouldShowValidationDescriptionError:!1,shouldShowValidationLinkFormatError:!1,shouldShowGenericUpdateError:!1,shouldShowValidationUserMentionTagsError:!1,userMentionTags:this.props.pinResource.data&&this.props.pinResource.data.user_mention_tags||[]}),le(this,"onClickDeleteButton",()=>this.setState({showDeleteConfirmation:!0})),le(this,"onHideConfirmation",()=>this.setState({showDeleteConfirmation:!1})),le(this,"updateCarouselSlotIndex",()=>{const{carouselSlotCurrentIndex:e}=this.props;this.setState({currentIndex:void 0!==e?e:this.props.pinResource.data&&this.props.pinResource.data.carousel_data&&this.props.pinResource.data.carousel_data.index||0})}),le(this,"handleBoardChange",e=>{const{board:{id:t}}=this.state;e.id!==t&&this.setState({board:e,sectionId:null,sectionName:null})}),le(this,"createBoard",e=>{const{board:t}=this.state;if(!t.id&&t.name&&e){const{dispatch:a}=this.props;a(function(e,t){const a={name:e,privacy:p.a.BoardPrivacy.PUBLIC};return e=>m.a.create("BoardResource",a).callCreate().then(a=>{const n=a.resource_response.data;return e(t.username&&Object(b.f)("BoardsResource",Object(g.a)(t.username,!1))),n})}(t.name,e)).then(e=>{if(this._isMounted){const{sectionId:t,sectionName:a}=this.state;!t&&a?(this.setState({board:e}),this.createSection()):(this.handleBoardChange(e),this.handleSave())}})}}),le(this,"handleBoardCreateClick",e=>{if(!e)return;const t={name:e,privacy:p.a.BoardPrivacy.PUBLIC};this.setState({board:t,sectionId:null,sectionName:null})}),le(this,"createSection",()=>{const{board:e,sectionName:t}=this.state;if(!t)return;if(!e.id)return void this.createBoard();const a={boardId:e.id,name:t},{dispatch:n}=this.props;n(Object(E.a)(a)).then(e=>{this._isMounted&&(this.setState({sectionId:e&&e.id||null,sectionName:e&&e.title||null}),this.handleSave())}).catch(e=>{this.setState({shouldShowGenericUpdateError:!0,apiErrorMessage:e.message})})}),le(this,"handleSectionCreateClick",e=>{if(0===e.length)return;const{board:t}=this.state;t&&this.setState({sectionId:null,sectionName:e})}),le(this,"handleSectionChange",e=>this.setState({sectionId:e&&e.id||null,sectionName:e&&e.title||null,shouldShowGenericUpdateError:!1})),le(this,"handleDeletePin",()=>{const{pinResource:{data:e},pinId:t,onDelete:a,onHide:n,changeBoardPinCount:i,changeUserPinCount:o,advertiser_id:r}=this.props,s={...r?{advertiser_id:r}:{},id:t};return m.a.create("PinResource",s).callDelete().then(()=>{if(this._isMounted){if(!e)return;const{board:{id:r},pinner:{id:s},section:d}=e;i({boardId:r,sectionId:d&&d.id||void 0,increment:-1}),o({userId:s,increment:-1}),J.a.instance.publish(r,"pinDeleted",t),J.a.instance.publish(s,"pinDeleted"),J.a.instance.publish(t,"pinDeleted"),n(),a&&a()}})}),le(this,"sanitizeCarouselData",e=>{let{carousel_data:t}=this.state;if(e&&(t=e),t){const{carousel_slots:e}=t;if(e){const t={carousel_slots:[]};return e.forEach(e=>{const a={};a.description=e.details||"",a.title=e.title||"",a.link=e.link||"",t.carousel_slots.push(a)}),t}}return null}),le(this,"triggerBoardAndSectionCreate",e=>()=>{const{board:t,sectionId:a,sectionName:n}=this.state;!t.id&&t.name?this.createBoard(e):!a&&n?this.createSection():this.handleSave()}),le(this,"handleSave",()=>{this.setState({isProcessing:!0});const{advertiser_id:e,pinId:t,pinResource:{data:a},invalidatePinResource:n,completeResourceFetch:i,onHide:o}=this.props;if(!a)return;const{board:r,comments_disabled:s,did_it_disabled:d,title:l,description:c,link:h,section:u,carousel_data:p}=a,{carousel_data:g,shouldShowValidationLinkFormatError:b}=this.state;let E;if(g){const e=this.sanitizeCarouselData();e&&(E=JSON.stringify(e))}const{board:f,commentsDisabled:y,currentIndex:_,photosDisabled:S,title:w,description:v,sectionId:x,carousel_data:I,userMentionTags:M}=this.state,P=f||r,D=b?h:this.state.link,R={board_id:P.id,board_section_id:x,carousel_data_json:E,description:v,disable_comments:y,disable_did_it:S,id:t,link:D,title:w,user_mention_tags:JSON.stringify(M),...e?{advertiser_id:e}:{}},B=u&&u.id||null,k=P.id,j=r.id,T=j!==k,L=(Boolean(B)||Boolean(x))&&B!==x,O=he(l,w),F=he(c,v),N=he(h,D),U=Boolean(I)&&Boolean(p)&&!C()(I,p);T||L||O||F||N||U||(s!==y||d!==S)?m.a.create("PinResource",R).callUpdate().then(({resource_response:e})=>{if(this._isMounted){const{changeBoardPinCount:t,onSubmit:a,pinId:r,pinMoved:s,view:d,viewParameter:l}=this.props;(T||L)&&k&&j&&(s({selectedPinIds:[r],source:{boardId:j,sectionId:B},target:{boardId:k,sectionId:x}}),t({boardId:k,sectionId:x||void 0,increment:1}),t({boardId:j,sectionId:B||void 0,increment:-1})),a&&k&&P.url&&a({boardId:k,title:P.name,sectionId:x,url:P.url}),o(),n(r);const{data:h}=e;h.carousel_data&&(h.carousel_data.index=_),i(h);const u={};u.objectId=r,u.num_user_mention_tags=M.length,T&&(u.board_was_modified=!0),!T&&L&&(u.board_section_was_modified=!0),F&&(u.original_pin_description=c,u.edited_pin_description=v),U&&(u.original_carousel_data=JSON.stringify(this.sanitizeCarouselData(p)),u.edited_carousel_data=JSON.stringify(this.sanitizeCarouselData(I))),Object(A.a)(2,{component:208,view:d,viewParameter:l,...u})}}).catch(()=>{const{shouldShowValidationTitleError:e,shouldShowValidationDescriptionError:t,shouldShowValidationLinkFormatError:a}=this.state;this.setState({isProcessing:!1,shouldShowGenericUpdateError:!e&&!t&&!a})}):(o(),n(t)),this.setState({isProcessing:!1})}),le(this,"handleTextChanges",(e,t)=>{const{carousel_data:a}=this.state;if(!a)return;const n=h()(a),{carousel_slots:i=[]}=n,{currentIndex:o,shouldApplyTextToAll:r,description:s,link:d,title:l}=this.state,c=this.valueIsValidForType(e,t);switch(r?i.forEach(a=>a[t]=e):i[o]&&(i[o][t]=e),t){case"details":const t=0===o?e:s;this.setState({description:t,carousel_data:n||null,shouldShowValidationDescriptionError:!c,shouldShowGenericUpdateError:!1});break;case"link":const a=0===o?e:d;this.setState({link:a,carousel_data:n||null,shouldShowValidationLinkFormatError:!c,shouldShowGenericUpdateError:!1});break;case"title":const i=0===o?e:l;this.setState({title:i,carousel_data:n||null,shouldShowValidationTitleError:!c,shouldShowGenericUpdateError:!1})}}),le(this,"handleDescriptionChange",({value:e,userMentionTags:t})=>{const a=this.valueIsValidForType(e,"description"),n=this.valueIsValidForType(t,"userMentionTags");t.length<this.state.userMentionTags.length&&Object(A.a)(8906,{element:116,tag_type:1}),this.setState({description:e,userMentionTags:t,userNote:e,shouldShowValidationDescriptionError:!a,shouldShowValidationUserMentionTagsError:!n,shouldShowGenericUpdateError:!1})}),le(this,"handleCarouselDetailsChange",({value:e})=>{this.handleTextChanges(e,"details")}),le(this,"handleTitleChange",({value:e})=>{const t=this.valueIsValidForType(e,"title");this.setState({title:e,shouldShowValidationTitleError:!t,shouldShowGenericUpdateError:!1})}),le(this,"handleCarouselTitleChange",({value:e})=>{this.handleTextChanges(e,"title")}),le(this,"valueIsValidForType",(e,t)=>{switch(t){case"details":case"description":return e.length<=500;case"link":return e.length>=0&&0===Object(se.r)([Object(se.q)({message:y.a._("Not a valid url.","Validation error for an improperly formated url","Validation error for an improperly formated url")})],e).length;case"title":return e.length<=100;case"userMentionTags":return e.length<=5;default:return!0}}),le(this,"handleWebsiteChange",({value:e})=>{const t=this.valueIsValidForType(e,"link");this.setState({link:e,shouldDisableSave:!t,shouldShowValidationLinkFormatError:!t,shouldShowGenericUpdateError:!1})}),le(this,"handleCarouselWebsiteChange",({value:e})=>{this.handleTextChanges(e,"link")}),le(this,"handleCommentChange",e=>this.setState({commentsDisabled:!e.value})),le(this,"handlePhotoChange",e=>this.setState({photosDisabled:!e.value})),le(this,"handleShouldApplyToAll",e=>{if(e){const{currentIndex:t,carousel_data:a}=this.state;if(!a)return;const n=h()(a),{carousel_slots:i}=n,{details:o,link:r,title:s}=i[t];i.forEach(e=>{e.details=o,e.title=s,e.link=r}),this.setState({carousel_data:n,shouldApplyTextToAll:e})}else this.setState({shouldApplyTextToAll:e})}),le(this,"handleCarouselSlider",e=>{const{carousel_data:t}=this.state,a=t&&t.carousel_slots&&t.carousel_slots.length||1;e>=0&&e<a&&this.setState({currentIndex:e})}),le(this,"handleClickStoryPinPages",()=>{const{pinResource:{data:e},history:t}=this.props;e&&t.push(`/story-pin-builder/${e.id}/edit`)}),le(this,"handleMouseEnter",()=>{this.setState({shouldShowCarouselSliders:!0})}),le(this,"handleMouseLeave",()=>{this.setState({shouldShowCarouselSliders:!1})})}componentDidMount(){this._isMounted=!0,this.updateCarouselSlotIndex()}UNSAFE_componentWillReceiveProps(e){const{pinResource:{data:t,isLoaded:a},carouselSlotCurrentIndex:n}=e;t&&a!==this.props.pinResource.isLoaded&&this.setState({board:t.board,commentsDisabled:t.comments_disabled,description:t.description&&t.description.trim(),link:t.link,photosDisabled:t.did_it_disabled,sectionId:(t.section||{}).id,sectionName:(t.section||{}).title,title:t.title,userNote:t.unified_user_note,carousel_data:t.carousel_data,currentIndex:void 0!==n?n:t.carousel_data&&t.carousel_data.index||0,shouldApplyTextToAll:!1,userMentionTags:t.user_mention_tags||[]})}componentWillUnmount(){this._isMounted=!1}generateIndexIndicator(){const{currentIndex:e,carousel_data:t}=this.state,a=t&&t.carousel_slots&&t.carousel_slots.length||1;return a<2?"":i.a.createElement(I.d,{direction:"row",padding:2},i.a.createElement(I.t,{htmlFor:"CardsIndex"},i.a.createElement(I.R,{size:"md"},e+1,"/",a)))}getCurrentUserId(e){const{adminModeInfo:t,advertiserOwnerUserId:a}=this.props;return t&&t.version===Z.a?a:e.isAuth?e.id:""}render(){const{disableDelete:e,onHide:t,pinResource:a,pinId:n,requestContext:o,adminModeInfo:c,viewer:h}=this.props,{apiErrorMessage:p,board:m,commentsDisabled:g,description:b,link:E,photosDisabled:f,sectionId:C,sectionName:S,showDeleteConfirmation:v,title:x,userNote:M,isProcessing:P,carousel_data:R,shouldApplyTextToAll:k,currentIndex:j,shouldDisableSave:T,shouldShowCarouselSliders:A,shouldShowValidationTitleError:F,shouldShowValidationDescriptionError:N,shouldShowValidationLinkFormatError:U,shouldShowGenericUpdateError:z,shouldShowValidationUserMentionTagsError:Y,userMentionTags:W}=this.state,H=a.data||{},q=R&&R.carousel_slots&&R.carousel_slots.length>0&&R.carousel_slots[j]||{},{details:J="",link:$="",title:ae=""}=q;if(v)return i.a.createElement(D,{onDeletePin:this.handleDeletePin,onDismiss:this.onHideConfirmation});const ne=(null==c?void 0:c.version)===Z.a&&!(null==c?void 0:c.writeMode),ie=!!(H&&H.story_pin_data_id&&H.story_pin_data),re=!!(R&&R.carousel_slots&&R.carousel_slots.length>1),se=H&&(H.access||[]).includes("write")||this.props.canEdit||!!m&&Object(r.a)({action:4,board:m}),de=e=>{const t=this.getCurrentUserId(e);return se&&!H.is_repin&&!ne&&!(H.aggregated_pin_data&&H.aggregated_pin_data.is_shop_the_look)&&!ie&&(re||!R)&&(H.native_creator&&H.native_creator.id===t||re&&H.pinner&&H.pinner.id===t||H.link_domain&&H.link_domain.official_user&&H.link_domain.official_user.id===t||!!H.domain&&H.pinner&&H.pinner.id===t&&H.pinner.domain_url&&H.pinner.domain_url.includes(H.domain))},le=e=>!de(e),ce=H&&H.images&&H.images["474x"]||{},he=new O.c(o,"web_story_pin_creator").enabledWithNoActivation(),ue=H.story_pin_data&&H.story_pin_data.metadata&&H.story_pin_data.metadata.version?Object(ee.a)(H.story_pin_data.metadata.version,te.a):null,pe=null!=ue&&ue>=0,me=!!H.story_pin_data&&!!H.story_pin_data.metadata&&!!H.story_pin_data.metadata.is_editable&&H.native_creator&&H.native_creator.id===this.getCurrentUserId(h);return ie&&he&&pe&&me?i.a.createElement(X,{apiErrorMessage:p,board:m,canEdit:se,commentsDisabled:g,description:b,disableDelete:e,handleBoardChange:this.handleBoardChange,handleBoardCreateClick:this.handleBoardCreateClick,handleCommentChange:this.handleCommentChange,handleClickStoryPinPages:this.handleClickStoryPinPages,handlePhotoChange:this.handlePhotoChange,handleSectionChange:this.handleSectionChange,handleSectionCreateClick:this.handleSectionCreateClick,isProcessing:P,onClickDeleteButton:this.onClickDeleteButton,onHide:t,photosDisabled:f,pinResource:a,sectionId:C,sectionName:S,shouldDisableSave:T,shouldShowGenericUpdateError:z,title:x,triggerBoardAndSectionCreate:this.triggerBoardAndSectionCreate}):i.a.createElement(_.b,{heading:y.a._("Edit this Pin","Edit a previously saved pin","Edit a previously saved pin"),accessibilityModalLabel:y.a._("Edit your previously saved pin","Accessible label for edit previously saved pin modal","Accessible label for edit previously saved pin modal"),size:"lg",onDismiss:t,footer:i.a.createElement(I.d,{display:"flex",justifyContent:"between",marginStart:-1,marginEnd:-1},i.a.createElement(I.d,null,i.a.createElement(w.a,{id:"delete-pin-button"},i.a.createElement(I.e,{text:y.a._("Delete"),onClick:this.onClickDeleteButton,disabled:e}))),z&&i.a.createElement(I.d,{display:"flex",marginStart:2,marginTop:2,justifyContent:"center"},i.a.createElement(L.a,{errorMessage:p||y.a._("Sorry! There was an error editing your Pin.","Toast for pin edit error","Toast for pin edit error"),htmlFor:"pin-edit-generic-error"})),i.a.createElement(I.d,{display:"flex",justifyContent:"between",marginStart:-2,marginEnd:-2},i.a.createElement(I.d,{paddingX:2},i.a.createElement(I.e,{text:y.a._("Cancel"),onClick:t})),i.a.createElement(I.d,{paddingX:2,"data-test-id":"edit-pin-save"},i.a.createElement(I.e,{text:y.a._("Save"),color:"red",onClick:this.triggerBoardAndSectionCreate(h),disabled:T}))))},!a.isLoaded||P?i.a.createElement(I.d,{paddingX:12,paddingY:9},i.a.createElement(I.K,{accessibilityLabel:y.a._("loading","Accessible label for the edit pin loading icon","Accessible label for the edit pin loading icon"),show:!0})):i.a.createElement(I.d,{md:{display:"flex"},justifyContent:"between",minHeight:350,paddingX:4},i.a.createElement(I.d,{xs:{column:12},md:{column:9}},i.a.createElement(B,{board:m||H.board,canEdit:se,onBoardChange:this.handleBoardChange,onBoardCreate:this.handleBoardCreateClick}),i.a.createElement(Q,{board:m||H.board,canEdit:se,currentSection:H.section,onSectionChange:this.handleSectionChange,sectionId:C,sectionName:S,onSectionCreate:this.handleSectionCreateClick}),le(h)?null:i.a.createElement(G,{canEdit:se,onTitleChange:re?this.handleCarouselTitleChange:this.handleTitleChange,title:re?ae:x,errorMessage:F?Object(oe.b)(re):""}),h.isAuth&&(H.pinner||{}).id===h.id||se?i.a.createElement(V,{canAddUserMentionTags:!le(h),canEdit:se,description:(e=>re?J:le(e)?M:b)(h)||"",errorMessage:(e=>N?(e=>le(e)?Object(oe.e)(re):Object(oe.a)(re))(e):Y?Object(oe.d)(re):"")(h),initialMentions:W,label:le(h)?y.a._("Note","Label for editing user note","Label for editing user note"):y.a._("Description","Label for editing description","Label for editing description"),placeholder:le(h)?y.a._("Write a note about this Pin...","Placeholder for editing user note","Placeholder for editing user note"):y.a._("Tell us about this Pin...","Placeholder for editing description","Placeholder for editing description"),onDescriptionChange:re?this.handleCarouselDetailsChange:this.handleDescriptionChange}):null,de(h)&&i.a.createElement(K,{link:re?$:E,onChangeWebsite:re?this.handleCarouselWebsiteChange:this.handleWebsiteChange,errorMessage:U?Object(oe.c)(re):""}),re&&i.a.createElement(I.d,{display:"flex",justifyContent:"end",paddingX:4,paddingY:3,alignItems:"end"},i.a.createElement(I.d,{paddingY:2},i.a.createElement(I.t,{htmlFor:"applyTextToAll"},i.a.createElement(I.R,null,y.a._("Apply text to all","Apply title, description, link to all cards","Apply title, description, link to all cards")))),i.a.createElement(I.d,{paddingX:2,paddingY:2},i.a.createElement(I.N,{onChange:e=>this.handleShouldApplyToAll(e.value),id:"applyTextToAll",switched:k}))),H.can_delete_did_it_and_comments&&i.a.createElement(u.a,{commentsDisabled:g,onCommentChange:this.handleCommentChange,onPhotoChange:this.handlePhotoChange,photosDisabled:f})),i.a.createElement(I.d,{paddingX:4,paddingY:3,justifyContent:"center",direction:"column"},re?this.generateIndexIndicator():"",i.a.createElement(I.x,{width:236},i.a.createElement(I.d,{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},i.a.createElement(I.x,{rounding:2,wash:!0},re&&A&&i.a.createElement(I.d,{width:"100%",height:"100%",display:"inlineBlock",position:"absolute",dangerouslySetInlineStyle:{__style:{zIndex:10,background:"rgba(0, 0, 0, 0.3)"}}},i.a.createElement(l.default,{handleCarouselSwipe:this.handleCarouselSlider,carouselIndex:j,carouselData:R,pinId:n,isEditMode:!0})),re?i.a.createElement(s.a,{carouselIndex:j,isCloseup:!1,carouselData:R,pinId:n,isEditMode:!0}):i.a.createElement(I.s,{alt:b,color:"#efefef",naturalHeight:ce.height,src:ce.url,naturalWidth:ce.width})),re&&i.a.createElement(d.default,{carouselIndex:j,carouselData:R,pinId:n,handleCarouselSwipe:this.handleCarouselSlider,isEditMode:!0,variant:"legacy"}))))))}})},NXrh:function(e,t,a){a.d(t,"a",(function(){return f}));var n=a("q1tI"),i=a.n(n),o=a("/MKj"),r=a("Sihc"),s=a("Ye/N"),d=a("rrvb"),l=a("fArA"),c=a("0BOE"),h=a("jdx6"),u=a("qyR9"),p=a("zLLH"),m=a("n6mq");function g(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const b="NO_SECTION_VALUE";function E({section:e,hovered:t,searchQuery:a}){return i.a.createElement(m.d,null,i.a.createElement(m.d,{color:t?"lightGray":"white",display:"flex",padding:2,rounding:2},i.a.createElement(m.d,{flex:"grow"},i.a.createElement(m.R,{weight:"bold"},Object(h.b)(a,e.title)))),e.id===b&&i.a.createElement(m.l,null))}const f=class extends n.Component{constructor(...e){super(...e),g(this,"state",{searchQuery:""}),g(this,"getPickerSections",()=>{const{searchQuery:e}=this.state,{sectionsResource:t,mergingFromSectionId:a}=this.props;let n=t&&t.data||[];return n=a?n.filter(e=>e.id!==a):[{id:b,title:s.a._("No section","default dropdown option for selecting a board section on pin edit","default dropdown option for selecting a board section on pin edit")},...n],e.length>=u.a&&(n=Object(c.a)(n,e,"title")),[{items:n}]}),g(this,"createBtnDisabled",()=>{const{sectionsResource:e}=this.props,{searchQuery:t}=this.state;return!(!e||!e.data)&&e.data.some(e=>e.title.toLowerCase()===t.toLocaleLowerCase())}),g(this,"handleSectionCreate",()=>{const{board:e,onSectionChange:t,sectionsResource:a,dispatch:n,onSectionCreate:i}=this.props,{searchQuery:o}=this.state;i?i(o):n&&e.id&&n(Object(r.a)({boardId:e.id,name:o})).then(e=>{a&&a.refreshData(),this.setState({searchQuery:""}),t(e)})}),g(this,"handleSectionSelected",e=>{const{onSectionChange:t}=this.props;e.id===b?(t(null),this.setState({searchQuery:""})):(t(e),this.setState({searchQuery:""}))}),g(this,"handleSearchQueryUpdate",e=>{this.setState({searchQuery:e})}),g(this,"renderRow",({item:e,hovered:t})=>{const{searchQuery:a}=this.state;return i.a.createElement(E,{hovered:t,searchQuery:a,section:e})})}componentDidUpdate(e){const t=e.selectedSectionId,{selectedSectionId:a}=this.props;if(a!==t){const{sectionsResource:e}=this.props;e&&e.refreshData()}}render(){const{isStoryPin:e,sectionsResource:t,selectedSectionId:a,mergingFromSectionId:n,selectedSectionName:o}=this.props,{searchQuery:r}=this.state;let l=n?s.a._("Pick a section","default dropdown option for selecting a board section to merge to","default dropdown option for selecting a board section to merge to"):s.a._("No section","default dropdown option for selecting a board section on pin edit","default dropdown option for selecting a board section on pin edit");if(a){let e;t&&t.data&&(e=t.data.find(e=>e.id===a)),l=e&&e.title||l}else o&&(l=o);return i.a.createElement(m.d,null,i.a.createElement(m.K,{accessibilityLabel:s.a._("loading section picker","accessibility text for loading spinner","accessibility text for loading spinner"),show:!!t&&!t.isLoaded}),(!t||t&&t.isLoaded)&&i.a.createElement(d.a,{createBtnDisabled:this.createBtnDisabled(),dropdownValue:l,isStoryPin:e,onCreate:n?null:this.handleSectionCreate,onSearchQueryUpdate:this.handleSearchQueryUpdate,onSelect:this.handleSectionSelected,renderRow:this.renderRow,searchQuery:r,sections:this.getPickerSections()}))}};t.b=Object(l.compose)(Object(o.connect)(),Object(p.c)({name:"BoardSectionsRepinResource",key:"sectionsResource",options:e=>({board_id:e.board.id})},{allowStale:!1}))(f)},NqRL:function(e,t,a){a.d(t,"a",(function(){return n}));const n="v2"},Q7uW:function(e,t,a){a.d(t,"a",(function(){return r}));var n=a("q1tI"),i=a.n(n),o=a("n6mq");function r(e){const{htmlFor:t,errorMessage:a}=e;return i.a.createElement(o.t,{htmlFor:t},i.a.createElement(o.d,{marginTop:1},i.a.createElement(o.R,{color:"red",size:"md"},a)))}},V711:function(e,t,a){var n=a("q1tI"),i=a.n(n),o=a("/MKj"),r=a("8cMa"),s=a("JW66"),d=a("Ye/N"),l=a("rrvb"),c=a("zLLH"),h=a("0BOE"),u=a("jdx6"),p=a("Wer7"),m=a("qyR9"),g=a("n6mq"),b=a("fArA"),E=a("oN2T");function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function C({board:e,hovered:t,searchQuery:a}){const n=e.privacy===s.a.BoardPrivacy.SECRET;return i.a.createElement(g.d,{color:t?"lightGray":"white",display:"flex",padding:2,rounding:2},i.a.createElement(g.d,{flex:"grow"},i.a.createElement(g.R,{weight:"bold"},Object(u.b)(a,e.name))),i.a.createElement(g.d,{direction:"row",display:"flex",flex:"none"},n&&i.a.createElement(r.a,{type:"secret"}),e.is_collaborative&&i.a.createElement(r.a,{type:"group"})))}t.a=Object(b.compose)(Object(o.connect)((function(e){const{advertiser:t,viewer:a}=e,n=a.isAuth&&t&&t.owner_user_id!==a.id;return{advertiser_id:n?t.id:null,username:n?t.owner_user_id:null,viewer:a}}),(function(e){return{invalidateBoardPickerBoardsResource:()=>{e(Object(p.f)("BoardPickerBoardsResource",{field_set_key:"board_picker"}))},createBoard:t=>e(Object(E.f)(t))}})),Object(c.c)({name:"BoardPickerBoardsResource",key:"boardResource",options:e=>({pin_id:e.pinId,field_set_key:"board_picker",onlyFetchBoards:!0,username:e.username,...e.advertiser_id&&e.username?{advertiser_id:e.advertiser_id,filter:"protected",username:e.username}:{}})},{allowStale:!1}))(class extends n.Component{constructor(e){super(e),f(this,"getSections",()=>{const{searchQuery:e}=this.state,{boardResource:{data:{all_boards:t}}}=this.props;return e.length>=m.a?[{items:Object(h.a)(t,e)}]:[{items:t}]}),f(this,"createBtnDisabled",()=>{const{boardResource:{data:{all_boards:e}}}=this.props,{searchQuery:t}=this.state;return e.some(e=>e.name.toLowerCase()===t.toLowerCase())}),f(this,"handleBoardCreate",e=>()=>{const{searchQuery:e}=this.state;if(!e)return;const{createBoard:t,invalidateBoardPickerBoardsResource:a,onBoardCreate:n}=this.props;a(),n?n(e):t({name:e,privacy:"public"}).then(e=>{const{onBoardChosen:t}=this.props;t(e)})}),f(this,"handleBoardSelected",e=>{this.props.onBoardChosen(e),this.setState({selectedBoard:e})}),f(this,"handleSearchQueryUpdate",e=>{this.setState({searchQuery:e})}),f(this,"renderRow",({item:e,hovered:t})=>{const{searchQuery:a}=this.state;return i.a.createElement(C,{board:e,hovered:t,searchQuery:a})}),this.state={searchQuery:"",selectedBoard:e.board}}render(){const{boardResource:e,board:t,isStoryPin:a,viewer:n}=this.props,{searchQuery:o,selectedBoard:r}=this.state;let s=d.a._("Select a board","Label for selecting a board in Edit Pin Modal","Label for selecting a board in Edit Pin Modal");return t?s=t.name:r&&(s=r.name),i.a.createElement(g.d,null,i.a.createElement(g.K,{accessibilityLabel:d.a._("loading board picker","accessibility text for loading spinner","accessibility text for loading spinner"),show:!e.isLoaded}),e.data&&i.a.createElement(l.a,{createBtnDisabled:this.createBtnDisabled(),dropdownValue:s,isStoryPin:a,onCreate:this.handleBoardCreate(n),onSearchQueryUpdate:this.handleSearchQueryUpdate,onSelect:this.handleBoardSelected,renderRow:this.renderRow,searchQuery:o,sections:this.getSections()}))}})},dtqy:function(e,t,a){var n=a("q1tI"),i=a.n(n),o=a("/MKj"),r=a("qWlA"),s=a("5S2N"),d=a("fArA"),l=a("U4JR");function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.a=Object(d.compose)(Object(o.connect)(({pins:e},{pinId:t,carouselSlotCurrentIndex:a})=>{const{carousel_data:n}=e&&t&&e[t]||{},{index:i}=n||{};return void 0!==a?{carouselSlotCurrentIndex:i||a||0}:{}}),(function(e){return class extends n.PureComponent{constructor(...e){super(...e),c(this,"state",{showEditModal:!1}),c(this,"onHide",()=>{this.setState({showEditModal:!1}),this.props.onToggleModal&&this.props.onToggleModal(!1)}),c(this,"handlePinEditButtonClick",Object(r.a)(e=>{e&&e.stopPropagation();const{component:t,onToggleModal:a}=this.props;a&&a(!0),Object(l.a)(101,{element:3,...t?{component:t}:{}}),this.setState({showEditModal:!0})}))}render(){const{pinId:t,onDelete:a,onSubmit:o,carouselSlotCurrentIndex:r}=this.props,{showEditModal:d}=this.state,l={...this.props,handlePinEditButtonClick:this.handlePinEditButtonClick};return i.a.createElement(n.Fragment,null,i.a.createElement(e,l),d&&i.a.createElement(s.a,{carouselSlotCurrentIndex:r,onDelete:a,onHide:this.onHide,onSubmit:o,pinId:t}))}}}))},rrvb:function(e,t,a){var n=a("q1tI"),i=a.n(n),o=a("Ye/N"),r=a("9QW3"),s=a("NdQN"),d=a("IBrh"),l=a("gdcG"),c=a("n6mq");function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.a=Object(l.a)(class extends i.a.Component{constructor(...e){super(...e),h(this,"state",{showFlyout:!1}),h(this,"setContainerRef",e=>{this.containerRef=e}),h(this,"handleCreate",()=>{this.hideFlyout();const{onCreate:e}=this.props;e&&e()}),h(this,"handleSelectItem",e=>{this.hideFlyout();const{onSelect:t,onCreate:a}=this.props;e?t(e):a&&a()}),h(this,"handleDropdownTouch",()=>{this.setState(e=>({showFlyout:!e.showFlyout}))}),h(this,"handleHideFlyout",e=>{this.containerRef&&e.target instanceof HTMLElement&&!this.containerRef.contains(e.target)&&this.hideFlyout()}),h(this,"hideFlyout",()=>{const{hoverHandlers:{onMouseLeave:e}}=this.props;e(),this.setState({showFlyout:!1})})}componentDidMount(){document.addEventListener("click",this.handleHideFlyout,{capture:!0})}componentWillUnmount(){document.removeEventListener("click",this.handleHideFlyout,{capture:!0})}render(){const{dropdownValue:e,fetchMore:t,hoverHandlers:{onMouseOver:a,onMouseLeave:n},isHovering:l,isStoryPin:h,onCreate:u,onSearchQueryUpdate:p,renderRow:m,searchQuery:g,sections:b,createBtnDisabled:E}=this.props,{showFlyout:f}=this.state;this.indexManager=new r.a(b.map(e=>e.items)),this.indexManager.setSelectItem(this.handleSelectItem);const C=!g.trim()||!!E;return i.a.createElement("div",{ref:this.setContainerRef,style:{...h?{flex:"grow"}:{}}},i.a.createElement(c.Q,{fullWidth:!!h,onMouseEnter:a,onMouseLeave:n,onTap:this.handleDropdownTouch,rounding:2},i.a.createElement(c.d,{alignItems:"center",color:l?"lightWash":"lightGray",direction:"row",display:"flex",flex:"grow",paddingX:4,paddingY:h?4:3,rounding:h?4:2},i.a.createElement(c.d,{display:"flex",flex:"grow"},i.a.createElement(c.R,{weight:"bold"},e)),i.a.createElement(c.q,{accessibilityLabel:"",color:"darkGray",icon:"arrow-down",size:14}))),f&&i.a.createElement(c.d,{position:"relative"},i.a.createElement(c.d,{borderSize:"sm",color:"white",dangerouslySetInlineStyle:{__style:{zIndex:1}},direction:"column",display:"flex",overflow:"hidden",position:"absolute",rounding:h?4:2,width:"100%"},i.a.createElement(c.d,null,i.a.createElement(c.d,{display:"flex",marginStart:-1,marginEnd:-1,padding:2},i.a.createElement(c.d,{display:"flex",flex:"grow",paddingX:1},i.a.createElement(s.a,{hideIcon:!0,indexManager:this.indexManager,onChange:p,value:g})),u&&i.a.createElement(c.d,{paddingX:1},i.a.createElement(c.e,{disabled:C,inline:!0,onClick:this.handleCreate,text:o.a._("Create","board or section dropdown create button","board or section dropdown create button")})))),i.a.createElement(d.a,{fetchMore:t,indexManager:this.indexManager,maxHeight:240,onSelectItem:this.handleSelectItem,renderItem:m,sections:b}))))}})},xOLo:function(e,t,a){a.r(t),a.d(t,"CarouselSliders",(function(){return g}));var n=a("q1tI"),i=a.n(n),o=a("/MKj"),r=a("XSD5"),s=a("ZbwW"),d=a("Ye/N"),l=a("0nTG"),c=a("U4JR"),h=a("n6mq");const u={slider:{cursor:"pointer",height:"100%",position:"relative",width:"10%",zIndex:"105",pointerEvents:"auto"}},p=(e,t,a,n,i,o,r,s,d,h)=>{if(!h||!i){const{carousel_slots:h,id:u}=i;Object(c.a)(108,{...d,objectId:t,component:s,view:r,viewParameter:o,eventData:{pinCarouselSlotEventData:{carouselSlotId:h[a]&&Number(h[a].id),carouselDataId:Number(u),carouselSlotIndex:a,toCarouselSlotIndex:n}},...Object(l.a)(e)||{}})}},m=(e,t,a,n,i,o)=>{o||void 0===n||(e.preventDefault(),e.stopPropagation(),n(t,a)),void 0!==i&&i(a)},g=({carouselIndex:e,carouselData:t,changeCarouselSlotIndex:a,handleCarouselSwipe:n,pin:o,pinId:r,contextLogData:s,viewParameter:l,viewType:c,componentType:g,isEditMode:b})=>{if(!t)return null;const{carousel_slots:E,index:f}=t,C=void 0!==e?e:f,y=Math.max(0,C-1),_=Math.min(E.length-1,C+1);return i.a.createElement(h.d,{display:"flex",justifyContent:"between",position:"absolute",left:!0,right:!0,bottom:!0,top:!0},i.a.createElement("div",{"data-test-id":"carousel-slider-left",role:"presentation",onClick:e=>{m(e,r,y,a,n,b),p(o,r,C,y,t,l,c,g,s,b)},onKeyUp:e=>{m(e,r,y,a,n,b),p(o,r,C,y,t,l,c,g,s,b)},style:u.slider},C>0&&i.a.createElement(h.d,{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},i.a.createElement(h.q,{color:"white",icon:"arrow-back",accessibilityLabel:d.a._("View Previous","Button to advance carousel to the previous image","Button to advance carousel to the previous image")}))),i.a.createElement("div",{"data-test-id":"carousel-slider-right",role:"presentation",onClick:e=>{m(e,r,_,a,n,b),p(o,r,C,_,t,l,c,g,s,b)},onKeyUp:e=>{m(e,r,_,a,n,b),p(o,r,C,_,t,l,c,g,s,b)},style:u.slider},C<E.length-1&&i.a.createElement(h.d,{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},i.a.createElement(h.q,{color:"white",icon:"arrow-forward",accessibilityLabel:d.a._("View Next","Button to advance carousel to the next image","Button to advance carousel to the next image")}))))};t.default=Object(o.connect)(({pins:e},{carouselData:t,pinId:a})=>{const n=e[a];return{pin:n,carouselData:t||Object(s.a)(n)}},e=>({changeCarouselSlotIndex:(t,a)=>e(Object(r.a)(t,a))}))(g)}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/js/97-5cbd4286fb15b8bcefc5.mjs.map
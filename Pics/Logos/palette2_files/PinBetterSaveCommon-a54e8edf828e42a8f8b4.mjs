(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["PinBetterSaveCommon",232],{"+c4W":function(e,t,n){var o=n("711d"),i=n("4/ic"),a=n("9ggG"),r=n("9Nap");e.exports=function(e){return a(e)?o(r(e)):i(e)}},"0zyx":function(e,t,n){n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}));var o=n("mVx/"),i=n.n(o);const a=({pathname:e})=>/^\/pin\/[\w-]+\/?$/.test(e),r=e=>{const t=i()(e,e=>!a(e));return t&&(({pathname:e})=>/^\/search\/pins\//.test(e))(t)?(({pathname:e,search:t})=>{const n=/^\/search\/pins\/(\?.*)$/.exec(e),o=(t||n&&n[1]||"").substr(1).split("&").map(e=>e.split("=")).find(e=>"q"===e[0]);return o?decodeURIComponent(o[1]):""})(t):""}},"1vym":function(e,t,n){},"4/ic":function(e,t,n){var o=n("ZWtO");e.exports=function(e){return function(t){return o(t,e)}}},"711d":function(e,t){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},CMye:function(e,t,n){var o=n("GoyQ");e.exports=function(e){return e==e&&!o(e)}},EuRG:function(e,t,n){function o(e,t){return{type:"SEARCH_PIN_CLOSEUP_VIEWED",payload:{pinId:e,query:t}}}function i(e){return{type:"SEARCH_QUERY_STARTED",payload:{query:e}}}function a(e){return{type:"SEARCH_QUERY_INVALIDATED",payload:{query:e}}}n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return a}))},GDhZ:function(e,t,n){var o=n("wF/u"),i=n("mwIZ"),a=n("hgQt"),r=n("9ggG"),s=n("CMye"),l=n("IOzZ"),c=n("9Nap"),d=1,u=2;e.exports=function(e,t){return r(e)&&s(t)?l(c(e),t):function(n){var r=i(n,e);return void 0===r&&r===t?a(n,e):o(t,r,d|u)}}},"H/Lk":function(e,t,n){n.d(t,"a",(function(){return o}));const o=(e,t,n)=>({type:"MOST_RECENT_BOARD",payload:{id:e,name:t,url:n}})},IOzZ:function(e,t){e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},JELi:function(e,t,n){var o=n("KwMD"),i=n("ut/Y"),a=n("Sxd8"),r=Math.max,s=Math.min;e.exports=function(e,t,n){var l=null==e?0:e.length;if(!l)return-1;var c=l-1;return void 0!==n&&(c=a(n),c=n<0?r(l+c,0):s(c,l-1)),o(e,i(t,3),c,!0)}},JKZO:function(e,t,n){var o=n("q1tI"),i=n.n(o),a=n("nokP"),r=n.n(a),s=n("yeYm"),l=n.n(s),c=n("clxp"),d=n("Cufx"),u=n("Ye/N"),p=n("n6mq");var h=e=>{const{id:t,isFocused:n,onMouseDown:o,onMouseEnter:a,onMouseUp:r,mention:s,role:l,searchValue:c}=e;return i.a.createElement("div",{id:t,onMouseDown:o,onMouseEnter:a,onMouseUp:r,searchvalue:c,role:l},i.a.createElement(p.d,{display:"flex",alignItems:"center",color:n?"lightGray":"transparent",rounding:4,dangerouslySetInlineStyle:{__style:{cursor:"pointer"}}},i.a.createElement(p.d,{padding:1},i.a.createElement(d.a,{accessibilityLabel:"",name:s.full_name,size:"sm",src:s.image_medium_url,verified:s.verified_identity&&s.verified_identity.verified})),i.a.createElement(p.d,{marginStart:2,marginEnd:2,overflow:"hidden"},i.a.createElement(p.R,{truncate:!0,weight:"bold",color:"darkGray"},s.full_name),i.a.createElement(p.d,{dangerouslySetInlineStyle:{__style:{whiteSpace:"nowrap"}}},i.a.createElement(p.R,{size:"sm",color:"darkGray"},s.username,s.explicitly_followed_by_me&&` • ${u.a._("Following","mentions.mentionsFlyout.following","Label to tell the user that they are viewing a user they follow")}`)))))},f=n("eOdZ"),m=n("vxan"),g=n("aAE7"),v=n.n(g),S=n("v83y"),y=n("TiQD");const b=({decoratorRect:e,popover:t,state:n,props:o,...i})=>{const a=(e.x||e.left)+t.offsetWidth,{top:r,left:s}=v()({decoratorRect:e,popover:t,state:n,props:o});let l=null;return a>window.innerWidth&&(l=`${parseFloat(s)-a%window.innerWidth}px`),{display:"block",top:`${parseFloat(r)+5}px`,left:l||s,zIndex:new p.j([y.a]).index()}},_=e=>i.a.createElement(p.R,{inline:!0,color:"blue",weight:"bold"},e.children);t.a=Object(m.a)(({focusOnMount:e,initialMentions:t=[],initialText:n="",maxSuggestions:a=5,makeCancelablePromise:s,onAddMention:d,onBlur:u,onChange:m,onFocus:g,onSearchMentionCancel:v,onSuggestionsPopoverClose:y,onSuggestionsPopoverOpen:w,placeholder:C,readOnly:O,spellCheck:E})=>{const T=Object(o.useRef)(null),[I,x]=Object(o.useState)(!1),[R,B]=Object(o.useState)(!1),[k,P]=Object(o.useState)([]),[{plugins:D,MentionSuggestions:j}]=Object(o.useState)(()=>(()=>{const e=r()({entityMutability:"IMMUTABLE",mentionComponent:_,mentionPrefix:"@",mentionTrigger:"@",positionSuggestions:b,supportWhitespace:!1}),{MentionSuggestions:t}=e;return{plugins:[e],MentionSuggestions:t}})()),[F,M]=Object(o.useState)(()=>S.EditorState.createWithContent((({text:e,mentions:t})=>{const n=[],o={},i=[];return t&&t.forEach((e,t)=>{const{length:n,offset:a,object_id:r}=e;o[t]={data:{mention:{id:r}},mutability:"IMMUTABLE",type:"mention"},i.push({key:t,length:n,offset:a})}),n.push({text:e,key:null,depth:null,inlineStyleRanges:null,type:"unstyled",entityRanges:i}),Object(S.convertFromRaw)({entityMap:o,blocks:n})})({text:n,mentions:t})));Object(o.useEffect)(()=>{x(!0)},[]),Object(o.useEffect)(()=>{e&&T.current&&setTimeout(T.current.focus,50)},[I]);const N=Object(o.useCallback)(e=>{P([]),d&&d(e)},[]),U=Object(o.useCallback)(e=>{u&&u(e)},[]),A=Object(o.useCallback)(e=>{const t=e.getCurrentContent(),n=t.getPlainText(""),o=(e=>{const t=[];let n=0;return e.getBlocksAsArray().forEach((o,i)=>{let a=null;o.findEntityRanges(t=>{const n=t.getEntity();if(!n)return!1;const o=e.getEntity(n);return"mention"===o.getType()&&(a=o.data.mention,!0)},(e,o)=>{a&&t.push({object_id:a.id,offset:n+e,length:o-e,tag_type:1})}),n+=1+o.getLength()}),t})(t);M(e),m({text:n,mentions:o})},[]),W=Object(o.useCallback)(e=>{g&&g(e)},[]),H=Object(o.useCallback)(()=>{B(!1),y&&y()},[]),L=Object(o.useCallback)(()=>{B(!0),w&&w()},[]),G=Object(o.useCallback)((e,t)=>{if(v&&" "===e&&R&&v(),k.length>0)return"not-handled";const n=t.getCurrentContent(),o=t.getSelection();return A(S.EditorState.push(t,S.Modifier.replaceText(n,o,e),"adjust-depth")),"handled"},[k]),z=Object(o.useCallback)(({value:e})=>{s(f.a.create("UserMentionTypeaheadResource",{query:e,num_people:a}).callGet(),"userMentionTypeahead").then(e=>{const t=(({suggestions:e})=>e.map(e=>({...e,name:e.username})))({suggestions:e.resource_response.data});P(t)}).catch(()=>{})},[]);return i.a.createElement(c.a,{name:"EditorWithMentions"},I&&i.a.createElement(p.d,{"data-test-id":"editor-with-mentions",width:"100%"},i.a.createElement(l.a,{editorState:F,onBlur:U,onChange:A,onFocus:W,handleBeforeInput:G,placeholder:C,plugins:D,readOnly:O,ref:T,spellCheck:E,stripPastedStyles:!0}),i.a.createElement(j,{onAddMention:N,onClose:H,onOpen:L,onSearchChange:z,suggestions:k,entryComponent:h})))})},KwMD:function(e,t){e.exports=function(e,t,n,o){for(var i=e.length,a=n+(o?1:-1);o?a--:++a<i;)if(t(e[a],a,e))return a;return-1}},O7RO:function(e,t,n){var o=n("CMye"),i=n("7GkX");e.exports=function(e){for(var t=i(e),n=t.length;n--;){var a=t[n],r=e[a];t[n]=[a,r,o(r)]}return t}},Sxd8:function(e,t,n){var o=n("ZCgT");e.exports=function(e){var t=o(e),n=t%1;return t==t?n?t-n:t:0}},WnNx:function(e,t,n){function o(e){return{type:"SHOW_REPIN_ANIMATION",payload:{pinId:e}}}function i(){return{type:"HIDE_REPIN_ANIMATION"}}function a(){return{type:"SHOW_USECASE_FLYOUT"}}function r(){return{type:"HIDE_USECASE_FLYOUT"}}n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return a})),n.d(t,"b",(function(){return r}))},XKAG:function(e,t,n){var o=n("ut/Y"),i=n("MMmD"),a=n("7GkX");e.exports=function(e){return function(t,n,r){var s=Object(t);if(!i(t)){var l=o(n,3);t=a(t),n=function(e){return l(s[e],e,s)}}var c=e(t,n,r);return c>-1?s[l?t[c]:c]:void 0}}},ZCgT:function(e,t,n){var o=n("tLB3"),i=1/0,a=17976931348623157e292;e.exports=function(e){return e?(e=o(e))===i||e===-i?(e<0?-1:1)*a:e==e?e:0:0===e?e:0}},ZCpW:function(e,t,n){var o=n("lm/5"),i=n("O7RO"),a=n("IOzZ");e.exports=function(e){var t=i(e);return 1==t.length&&t[0][2]?a(t[0][0],t[0][1]):function(n){return n===e||o(n,e,t)}}},ZVWG:function(e,t,n){n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return l}));var o=n("etmJ");const i=(e,t)=>{const n=/^\d{1,3}\.\d{1,3}(?:\.\d{1,6})?$/;if(!e.match(n)||!t.match(n))return null;const o=e.split("."),i=t.split("."),a=Math.max(o.length,i.length);for(let r=0;r<a;r+=1){const e=r<o.length?parseInt(o[r],10):0,t=r<i.length?parseInt(i[r],10):0;if(e<t)return-1;if(e>t)return 1}return 0},a=e=>({defaultStyle:0,fontFamily:e.name,fontGroup:o.c,fontOverrides:{letterSpacing:e.letter_spacing,lineHeight:e.line_height},format:"truetype",id:e.id,styles:[{fontStyle:"",fontUrl:e.url,fontWeight:"normal",name:"normal"}]});function r(e){const t=[];let n="";for(const o of e)if(n){const e=!!o.match(/\s/),i=!!n.match(/\s/);if(e===i)n+=o;else if(!i&&n.includes("-")){let e=0;for(let o=0;o<n.length;o+=1)"-"===n[o]&&(t.push(n.substring(e,o+1)),e=o+1);t.push(n.substring(e)),n=o}else t.push(n),n=o}else n=o;return n.length&&t.push(n),t}function s({font:e,fontSize:t,textList:n,width:o}){var i,a;if("undefined"==typeof document||!document.body||o<=0||t<=0)return[];const s=document.body,l=document.createElement("div");s.appendChild(l);const c=null!=(null===(i=e.fontOverrides)||void 0===i?void 0:i.letterSpacing)?`${e.fontOverrides.letterSpacing}px`:void 0,d=(null===(a=e.fontOverrides)||void 0===a?void 0:a.lineHeight)||1.1,u={letterSpacing:c,lineHeight:String(d),fontFamily:e.fontFamily,fontSize:`${t}px`,visibility:"hidden"};Object.assign(l.style,u);const p=document.createElement("div");p.style.display="inline",l.appendChild(p);const h=document.createTextNode("");p.appendChild(h);const f=[];let m="";const g=e=>{const t=e.trim();return h.textContent=t,{text:t,width:p.offsetWidth}},v=e=>{const t=!!e.match(/\s/),n=0===m.length;if(h.textContent=`${m}${e}`,p.offsetWidth>o)if(t)f.push(g(m)),m="";else if(n)for(const o of e)v(o);else f.push(g(m)),m="",v(e);else m+=e};for(const S of n){0===S.length&&f.push(g(m)),r(S).forEach(e=>v(e)),m.length&&(f.push(g(m)),m="")}return p.remove(),l.remove(),f}function l({boxHeight:e,boxWidth:t,font:n,startFontSize:o,text:i}){var a,r;if("undefined"==typeof document||!document.body)return{fontSize:o,lines:[]};const l=document.body,c=document.createElement("div");l.appendChild(c);const d=i.split(/\r?\n/g);let u=o;const p=null!=(null===(a=n.fontOverrides)||void 0===a?void 0:a.letterSpacing)?`${n.fontOverrides.letterSpacing}px`:void 0,h=(null===(r=n.fontOverrides)||void 0===r?void 0:r.lineHeight)||1.1,f={letterSpacing:p,lineHeight:String(h),fontFamily:n.fontFamily,fontSize:`${u}px`,position:"absolute",visibility:"hidden",width:`${t}px`};Object.assign(c.style,f);const m=document.createElement("div");for(m.style.display="inline",c.appendChild(m),d.forEach((e,t)=>{const n=document.createElement("span");n.style.wordBreak="break-word",m.appendChild(n),n.appendChild(document.createTextNode(e)),t!==i.length-1&&n.appendChild(document.createElement("br"))});(m.offsetHeight>e||m.offsetWidth>t)&&u>0;)u-=1,c.style.fontSize=`${u}px`;return m.remove(),c.remove(),{fontSize:u,lines:u>0?s({font:n,fontSize:u,textList:d,width:t}):[]}}},ZdPf:function(e,t,n){n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return r}));const o={CONDITIONAL:0,EMOTIONAL_DISDRESS_OR_SUICIDE:4},i={ABUSIVE:0,SENSITIVE:1,BRAND_UNSAFE:2};function a(e){return null!=e&&(!!e.notice||!!e.notices&&e.notices.length>0)}function r(e){return!!e&&e.severity===i.ABUSIVE}},a49R:function(e,t,n){n.d(t,"a",(function(){return s}));var o=n("q1tI"),i=n.n(o),a=(n("17x9"),n("n6mq"));function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const s=i.a.createContext(()=>{}),l=752;t.b=class extends o.Component{constructor(...e){super(...e),r(this,"state",{flyout:void 0,showOnTopOfModal:!1}),r(this,"setActive",(e,t,n=!1)=>{if(e){const e={...t,onDismiss:()=>{t&&t.onDismiss&&(t.onDismiss(),this.setState({flyout:void 0}))},positionRelativeToAnchor:!1};this.setState({flyout:{props:e},showOnTopOfModal:n})}else this.setState({flyout:void 0})})}render(){var e,t,n,o,r,c,d,u,p;const{flyout:h,showOnTopOfModal:f}=this.state,{children:m}=this.props;return i.a.createElement(i.a.Fragment,null,i.a.createElement(s.Provider,{value:this.setActive},m),h&&i.a.createElement("div",f?{style:{zIndex:l,position:"absolute",top:0}}:{},i.a.createElement(a.n,{anchor:null===(e=h.props)||void 0===e?void 0:e.anchor,onDismiss:null===(t=h.props)||void 0===t?void 0:t.onDismiss,color:null===(n=h.props)||void 0===n?void 0:n.color,idealDirection:null===(o=h.props)||void 0===o?void 0:o.idealDirection,positionRelativeToAnchor:null===(r=h.props)||void 0===r?void 0:r.positionRelativeToAnchor,shouldFocus:null===(c=h.props)||void 0===c?void 0:c.shouldFocus,showCaret:null===(d=h.props)||void 0===d?void 0:d.showCaret,size:null===(u=h.props)||void 0===u?void 0:u.size},null===(p=h.props)||void 0===p?void 0:p.children)))}}},"bo/h":function(e,t,n){n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));const o="0.8.0";function i(e,t=1){return{x:e/5,y:e*(t-1)}}},e0nq:function(e,t,n){function o(e){return{type:"PIN_BETTER_SAVE",payload:e}}function i(e){return{type:"PIN_BETTER_UNSAVE",payload:e}}function a(e){return{type:"PIN_BETTER_SELECT_BOARD_OR_SECTION",payload:e}}function r(e){return{type:"POST_REPIN_MORE_IDEAS_UPSELL_SHOWN",payload:{boardId:e}}}n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return r}))},eIuQ:function(e,t,n){n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return r})),n.d(t,"e",(function(){return s})),n.d(t,"c",(function(){return l}));var o=n("Ye/N");function i(e){return e?o.a._("Title too long. Make sure all cards' titles have less than 100 characters","Title entered is too long while editing a carousel pin and/or one of its pins","Title entered is too long while editing a carousel pin and/or one of its pins"):o.a._("Title too long. Make sure title has less than 100 characters","Title entered is too long while editing a pin","Title entered is too long while editing a pin")}function a(e){return e?o.a._("Description too long. Make sure all cards' descriptions have less than 500 characters","Description entered is too long while editing a carousel pin and/or one of its pins","Description entered is too long while editing a carousel pin and/or one of its pins"):o.a._("Description too long. Make sure description has less than 500 characters","Description entered is too long while editing a pin","Description entered is too long while editing a pin")}function r(e){return o.a._("Too many mentions. Make sure you have at most 5.","editPinModal.errorMessages.userMentionOverLimit","Too many mentions used in the description")}function s(e){return e?o.a._("Note too long. Make sure all cards' notes have less than 500 characters","User note entered is too long while editing a carousel pin and/or one of its pins","User note entered is too long while editing a carousel pin and/or one of its pins"):o.a._("Note too long. Make sure note has less than 500 characters","User note entered is too long while editing a pin","User note entered is too long while editing a pin")}function l(e){return e?o.a._("Need to provide a valid URL. Make sure all cards' links are valid","Invalid URL/link provided while editing a carousel pin and/or one of its pins","Invalid URL/link provided while editing a carousel pin and/or one of its pins"):o.a._("Need to provide a valid URL. Make sure the link is valid","Invalid URL/link provided while editing a pin","Invalid URL/link provided while editing a pin")}},etmJ:function(e,t,n){n.d(t,"e",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return d})),n.d(t,"f",(function(){return u})),n.d(t,"j",(function(){return p})),n.d(t,"i",(function(){return h})),n.d(t,"h",(function(){return f})),n.d(t,"k",(function(){return m})),n.d(t,"m",(function(){return g})),n.d(t,"l",(function(){return v})),n.d(t,"g",(function(){return S}));var o=n("gIz7");const i="pin-builder-font-faces",a="system-font-faces",r="pin-builder-education-font-faces",s="licensed",l="system",c="brand",d=4,u=[{fontGroup:s,fontFamily:"A-FRAME",defaultStyle:0,format:"truetype",fontOverrides:{letterSpacing:0,lineHeight:.9,textTransform:!0},styles:[{name:"Black",fontStyle:"",fontWeight:"normal",fontUrl:"https://assets.pinterest.com/fonts/Graphik XCond-Black.otf"}]},{fontGroup:s,fontFamily:"Cross-stitch",defaultStyle:0,format:"truetype",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},styles:[{name:"Black",fontStyle:"normal",fontWeight:"normal",fontUrl:"https://assets.pinterest.com/fonts/Produkt-Medium.otf"}]},{fontGroup:s,fontFamily:"Lagoon",defaultStyle:0,format:"truetype",fontOverrides:{letterSpacing:0,lineHeight:.9,textTransform:!1},styles:[{name:"Black",fontStyle:"",fontWeight:"normal",fontUrl:"https://assets.pinterest.com/fonts/Gabriello-Black.otf"}]},{fontGroup:s,fontFamily:"Lava lamp",defaultStyle:0,format:"truetype",fontOverrides:{letterSpacing:0,lineHeight:.9,textTransform:!1},styles:[{name:"Black",fontStyle:"",fontWeight:"normal",fontUrl:"https://assets.pinterest.com/fonts/Publico Banner-Ultra Italic.otf"}]},{fontGroup:s,fontFamily:"Marathon",defaultStyle:0,format:"truetype",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},styles:[{name:"Black",fontStyle:"",fontWeight:"normal",fontUrl:"https://assets.pinterest.com/fonts/Produkt-Super Italic.otf"}]},{fontGroup:s,fontFamily:"Sourdough",defaultStyle:0,format:"truetype",fontOverrides:{letterSpacing:0,lineHeight:.9,textTransform:!1},styles:[{name:"Black",fontStyle:"",fontWeight:"normal",fontUrl:"https://assets.pinterest.com/fonts/Publico Banner-Bold.otf"}]},{fontGroup:s,fontFamily:"Superglue",format:"truetype",fontOverrides:{letterSpacing:0,lineHeight:.9,textTransform:!1},defaultStyle:0,styles:[{name:"Bold Italic",fontStyle:"",fontWeight:"normal",fontUrl:"https://assets.pinterest.com/fonts/Graphik-Bold+Italic.otf"}]},{fontGroup:l,fontFamily:"Merriweather",fontFaceUrl:"https://fonts.googleapis.com/css?family=Merriweather:700",fontOverrides:{letterSpacing:0,lineHeight:1.2,textTransform:!1},defaultStyle:0,styles:[{name:"Bold Italic",fontStyle:"italic",fontWeight:"700"}]},{fontGroup:s,fontFamily:"Noto Serif SC",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Serif+SC:400&display=swap&subset=chinese-simplified",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"zh-CN"},{fontGroup:s,fontFamily:"Noto Sans SC",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Sans+SC:400&display=swap&subset=chinese-simplified",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"zh-CN"},{fontGroup:s,fontFamily:"Noto Serif TC",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Serif+TC:400&display=swap&subset=chinese-traditional",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"zh-TW"},{fontGroup:s,fontFamily:"Noto Sans TC",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Sans+TC:400&display=swap&subset=chinese-traditional",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"zh-TW"},{fontGroup:s,fontFamily:"Noto Serif KR",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Serif+KR:400&display=swap&subset=korean",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"ko-KR"},{fontGroup:s,fontFamily:"Noto Sans KR",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Sans+KR:400&display=swap&subset=korean",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"ko-KR"},{fontGroup:s,fontFamily:"Noto Serif JP",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Serif+JP:400&display=swap&subset=japanese",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"ja"},{fontGroup:s,fontFamily:"Noto Sans JP",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Sans+JP:400&display=swap&subset=japanese",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"ja"},{fontGroup:s,fontFamily:"Noto Serif",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Serif:400&display=swap",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"hi-IN"},{fontGroup:s,fontFamily:"Noto Sans",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Sans:400&display=swap",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"hi-IN"},{fontGroup:l,fontFamily:"Playfair Display",fontFaceUrl:"https://fonts.googleapis.com/css?family=Playfair+Display:400",fontOverrides:{letterSpacing:0,lineHeight:1.2,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}]},{fontGroup:l,fontFamily:"Raleway",fontFaceUrl:"https://fonts.googleapis.com/css?family=Raleway:900",fontOverrides:{letterSpacing:0,lineHeight:1.2,textTransform:!1},defaultStyle:0,styles:[{name:"Black",fontStyle:"",fontWeight:"900"}]},{fontGroup:l,fontFamily:"Roboto Condensed",fontFaceUrl:"https://fonts.googleapis.com/css?family=Roboto+Condensed:700i",fontOverrides:{letterSpacing:0,lineHeight:1.2,textTransform:!1},defaultStyle:0,styles:[{name:"Bold Italic",fontStyle:"italic",fontWeight:"700"}]},{fontGroup:l,fontFamily:"Suez One",fontFaceUrl:"https://fonts.googleapis.com/css?family=Suez+One&display=swap",fontOverrides:{letterSpacing:0,lineHeight:.9,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}]},{fontGroup:l,fontFamily:"Domine",fontFaceUrl:"https://fonts.googleapis.com/css?family=Domine&display=swap",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}]},{fontGroup:l,fontFamily:"Overlock",fontFaceUrl:"https://fonts.googleapis.com/css?family=Overlock:900i&display=swap",fontOverrides:{letterSpacing:-1,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Black Italic",fontStyle:"",fontWeight:"400"}]},{fontGroup:l,fontFamily:"Satisfy",fontFaceUrl:"https://fonts.googleapis.com/css?family=Satisfy&display=swap",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}]}];function p(){return u}function h(e,t,n){const o=e.styles.find(e=>e.fontStyle===t&&e.fontWeight===n);return o?o.name:""}function f(e,t){return e.reduce((e,t)=>[...e,...t.fonts],[]).find(e=>e.fontFamily===t)||null}function m(e){return Object(o.a)(e,i)}function g(){return Object(o.a)(p(),a)}function v(){return Object(o.a)([u[d]],r)}function S(e){const t=function(e){const t=p();if(e){const n=t.findIndex(t=>t.localeFilter===e);if(n>=0)return t[n]}return t[6]}(e),n=t.defaultStyle,o=t.styles[n],{fontFamily:i,fontOverrides:a}=t,r=a&&a.textTransform?1:0,l=a&&a.lineHeight||1.2,c=a&&a.letterSpacing||0;return{fontGroupName:s,fontFamilyName:i,fontStyleName:o.name,fontWeight:o.fontWeight,fontSize:50,textColor:"#FFFFFF",marginIndex:1,alignmentIndex:1,positionIndex:2,backgroundColor:"",backgroundTransparencyIndex:0,lineHeight:l,letterSpacing:c,transformIndex:r,showMoreOptions:!1}}},fEA9:function(e,t,n){n.r(t);var o=n("q1tI"),i=n.n(o),a=n("/MKj"),r=n("qWlA"),s=(n("1vym"),n("TSYQ")),l=n.n(s),c=n("Ye/N"),d=n("pLLR"),u=n("n6mq");function p(e){const{dropdownClasses:t,dropdownRef:n,onBoardDropdownClick:a,onSaveClick:r,renderPinSaveTooltip:s,saveButtonClasses:d,saveButtonRef:p,showSaveButton:h,textColor:f,title:m}=e;return i.a.createElement(u.d,{alignItems:"center",display:"flex",width:"100%",height:44},i.a.createElement("button",{className:t,"data-test-id":"PinBetterSaveDropdown",onClick:a,ref:n},i.a.createElement(u.d,{paddingX:4,display:"flex",flex:"grow",alignItems:"center"},i.a.createElement(u.d,{flex:"grow",overflow:"hidden"},i.a.createElement(u.R,{color:f,truncate:!0,size:"sm"},i.a.createElement("span",{className:l()("PinBetterSave__DropdownText","PinBetterSave__DropdownText--lego")},m))),i.a.createElement(u.d,{marginStart:2,flex:"none","data-test-id":"boardSelectionDropdown"},i.a.createElement("div",{className:l()("PinBetterSave__DownArrowContainer","PinBetterSave__DownArrowContainer--lego")},i.a.createElement(u.q,{accessibilityLabel:c.a._("Select a board you want to save to","BetterSave accessibility label to change the board","BetterSave accessibility label to change the board"),color:"darkGray",icon:"arrow-down",size:12}))))),h&&i.a.createElement(o.Fragment,null,i.a.createElement("button",{className:d,onClick:r,"data-test-id":"PinBetterSaveButton",ref:p},i.a.createElement(u.R,{color:"white",size:"sm",weight:"bold"},c.a._("Save","BetterSave Save label","BetterSave Save label"))),!!s&&!!p.current&&s(p.current)))}function h(e){const{dropdownRef:t,onBoardDropdownClick:n,onSaveClick:o,renderPinSaveTooltip:a,saveButtonRef:r,showSaveButton:s,title:l}=e;return i.a.createElement(u.d,{alignItems:"center",display:"flex",width:"100%"},i.a.createElement(u.d,{flex:"grow",overflow:"hidden",width:"100%"},i.a.createElement(u.Q,{onTap:({event:e})=>n(e),ref:t},i.a.createElement(u.d,{alignItems:"center",display:"flex",flex:"grow",paddingX:4},i.a.createElement(u.d,{flex:"grow"},i.a.createElement(u.R,{color:"darkGray",size:"lg",truncate:!0,weight:"bold"},l)),i.a.createElement(u.d,{marginStart:2,flex:"none","data-test-id":"boardSelectionDropdown"},i.a.createElement(u.q,{accessibilityLabel:c.a._("Select a board you want to save to","PinBetterSave.BoardSelection.DropdownIcon","BetterSave accessibility label to change the board"),color:"darkGray",icon:"arrow-down",size:12}))))),s&&i.a.createElement(u.d,{flex:"none"},i.a.createElement(u.e,{color:"red",inline:!0,onClick:({event:e})=>{o(e)},ref:r,size:"lg",text:c.a._("Save","PinBetterSave.BoardSelection.SaveButton","BetterSave Save label")})),!!a&&!!r.current&&a(r.current))}function f(e){const{dropdownRef:t,onBoardDropdownClick:n,onSaveClick:a,renderPinSaveTooltip:r,selectedTitle:s,showSaveButton:c,unselectedText:u,variant:f,view:m}=e,{isRTL:g}=Object(d.d)(),v=Object(o.useRef)(),S=s||u;return"lego"===f?i.a.createElement(h,{dropdownRef:t,onBoardDropdownClick:n,onSaveClick:a,renderPinSaveTooltip:r,saveButtonRef:v,showSaveButton:c,title:S}):i.a.createElement(p,{dropdownClasses:l()("PinBetterSave__Dropdown","PinBetterSave__Dropdown--lego",{"PinBetterSave__Dropdown--rtl":g,"PinBetterSave__Dropdown--lego-pin":"pin"===m,"PinBetterSave__Dropdown--lego-closeup":"closeup"===m,"PinBetterSave__Dropdown--expandedLego":!c}),dropdownRef:t,onBoardDropdownClick:n,onSaveClick:a,renderPinSaveTooltip:r,saveButtonClasses:l()("PinBetterSave__Button","PinBetterSave__Button--lego",{"PinBetterSave__Button--rtl":g,"PinBetterSave__Button--lego-pin":"pin"===m}),saveButtonRef:v,showSaveButton:c,textColor:s?"darkGray":"gray",title:S})}var m=n("clxp"),g=n("1inl"),v=n("ajUs"),S=n("a49R");class y extends i.a.Component{constructor(...e){var t,n,o;super(...e),o=()=>{const{setActive:e,showOnTopOfModal:t,...n}=this.props;e("flyout",n,t||!1)},(n="renderFlyout")in(t=this)?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o}componentDidMount(){this.renderFlyout()}componentDidUpdate(){this.renderFlyout()}componentWillUnmount(){this.props.setActive()}render(){return null}}const b=e=>i.a.createElement(S.a.Consumer,null,t=>i.a.createElement(y,Object.assign({},e,{setActive:t})));b.displayName="MasonryFlyout";var _=b,w=n("3gA6"),C=n("eOdZ"),O=n("/5zs"),E=n("lm6u");const T=(e,t)=>{const[n,i]=Object(o.useState)([]),a=Object(d.d)();return Object(o.useEffect)(()=>{let n=!1;if(e){new O.c(a,"web_board_section_templates").enabled()&&C.a.create("SectionRecommendationsResource",{pinIds:[t]}).callGet().then(e=>{var t;if(n)return;const o=null==e?void 0:null===(t=e.resource_response)||void 0===t?void 0:t.data;i(o.length>0&&o[0]||[])})}return()=>{n=!0}},[e,t]),n};function I(e){const{action:t,additionalCreateFields:n,boardWithSection:o,children:a,onClose:r,pin:s,setCompletionPromise:l,showModal:c}=e,d=T(c,s.id);return i.a.createElement(E.a,{additionalCreateFields:n,boardWithSection:o,action:t,hideSuccessAnimation:!!d.length,onClose:r,setCompletionPromise:l,showCreate:!0,shouldShowToast:!d.length,pin:s},e=>a({...e,sectionSuggestions:d}))}var x=n("jHGc");function R(e){const{children:t,currentCarouselIndex:n,onDeleteSavedState:o,onEditSubmit:a,onToggleModal:r,pinId:s,variant:l,viewParameter:c}=e,d="pin"===l?{bgColor:"white",iconColor:"darkGray",size:"sm"}:{bgColor:"transparent",iconColor:"darkGray",size:"sm"};return i.a.createElement(u.d,{display:"flex",direction:"row",alignItems:"center",width:"closeup"===l?"100%":void 0,paddingX:"closeup"===l?2:void 0,marginStart:"pin"===l?-1:void 0,marginEnd:"pin"===l?-1:void 0},t&&i.a.createElement(u.d,{paddingX:1,"data-test-id":"saved-info",flex:"grow"},t),i.a.createElement(u.d,{paddingX:1,flex:"none",marginStart:"auto"},i.a.createElement(x.default,{component:0,onDelete:o,onSubmit:a,pinId:s,onToggleModal:r,viewParameter:c,carouselSlotCurrentIndex:n,style:d,useLegoStyles:"pin"===l})))}var B=n("e3KR"),k=n("Wrea"),P=n("fArA"),D=n("0zyx"),j=n("TN0d"),F=n("vvax"),M=n("EuRG"),N=n("H/Lk"),U=n("WnNx"),A=n("U4JR"),W=n("NjDU"),H=n("CvCA"),L=n("e0nq");const G=5e3,z=16,q=({boardId:e,boardUrl:t,postRepinMoreIdeasUpsell:n})=>{if(!t)return!1;const{recentSaves:o,recentUpsell:i}=n;if(i[e])return!1;const a=o.findIndex(t=>t.boardId!==e);return(-1===a?o.length:a)+1>=3};var $=Object(a.connect)(null,(e,t)=>({toastShown:()=>e(Object(L.c)(t.boardId))}))(class extends i.a.PureComponent{constructor(...e){var t,n,o;super(...e),o=()=>{const{boardId:e}=this.props;Object(A.a)(101,{component:20,element:10805,objectId:e})},(n="handleClick")in(t=this)?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o}componentDidMount(){const{toastShown:e}=this.props;e()}render(){const{boardName:e,boardUrl:t,onHide:n}=this.props;return i.a.createElement(H.a,{duration:G,onHide:n,text:Object(F.b)(c.a._("Find more ideas for {{ boardName }}"),{boardName:e}).join(""),href:`${t}more_ideas/?ideas_referrer=${z}`,onClick:this.handleClick})}}),Z=n("zLLH"),K=n("C0mq"),Y=n("ZdPf"),V=n("B6Tf"),Q=n("oTtT"),J=n("nGHF"),X=n("0nTG");function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"PinBetterSave",(function(){return oe}));const te=4;function ne({savedInfo:e,variant:t}){const n="closeup"===t,o=n?"sm":"md";return i.a.createElement(w.b,{className:"underlineLink",stopPropagation:!0,style:{color:"#333"},to:e.url||""},i.a.createElement(u.d,{marginStart:n?1:0},i.a.createElement(u.R,{color:"darkGray",inline:!0,size:o},Object(F.b)(c.a._("Saved to {{ destination }}","Saved to label for better save","Saved to label for better save"),{destination:i.a.createElement(u.R,{color:"darkGray",key:"pin_auto_save_link",size:o,truncate:!0,weight:"bold"},e.title)}))))}class oe extends i.a.Component{constructor(...e){var t;super(...e),t=this,ee(this,"state",{boardWithSection:null,createdBoard:null,suggestedBoardTitle:"",showBoardFlyout:!1,showRepinModal:!1,sensitiveContentNotice:null}),ee(this,"setBoardSaveCompletionPromise",e=>{const{createdBoard:t}=this.state;this._repinCompletionPromise=e,this._repinCompletionPromise.promise.then(e=>{if(!e.board)return;const{board:{id:n,name:o,url:i}}=e,a={boardId:n,title:o,url:i};this.updateSelectedBoardOrSection(a),this.updateSavedState({...a,localPinId:e.id}),t&&Object(Y.d)(t.sensitivity)&&Object(Y.c)(t.sensitivity)?this.setState({sensitiveContentNotice:t.sensitivity.notice||t.sensitivity.notices[0]}):this.handleRepinHide()})}),ee(this,"updateSavedState",e=>{const{reduxLocation:t,save:n,searchQueryInvalidated:o,onSave:i,pin:{id:a}}=this.props,r=t.query&&t.query.q||Object(D.a)(t.history);n({pinId:a,...e}),r&&o(r),i&&i()}),ee(this,"updateSelectedBoardOrSection",e=>{const{selectBoardOrSection:t,pin:{id:n}}=this.props;t({pinId:n,...e})}),ee(this,"updateSelectedItem",()=>{const{initialSelection:e,selectedItem:t}=this.props;!t&&e&&this.updateSelectedBoardOrSection(e)}),ee(this,"dropdownRef",i.a.createRef()),ee(this,"handleItemChosen",e=>{this.updateSelectedBoardOrSection(e),this.hideFlyout(!0),this.save(e)}),ee(this,"handleBoardCreate",Object(r.a)(({title:e=""}={})=>{this.hideFlyout(!0),this.setState(t=>({...t,suggestedBoardTitle:e,showRepinModal:!0}));const{onToggleFlyout:t}=this.props;t&&t(!0,!0)})),ee(this,"handleBoardCreated",e=>{this.setState({createdBoard:e})}),ee(this,"handleRepinHide",()=>{this.setState(e=>({...e,suggestedBoardTitle:"",showRepinModal:!1}));const{onToggleFlyout:e}=this.props;e&&e(!1,!1)}),ee(this,"handleBoardDropdownClick",e=>{const{pin:{id:t},viewParameter:n,boardPickerStopwatch:o}=this.props;e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation(),this.state.showBoardFlyout?this.hideFlyout(!0):(Object(A.a)(101,{component:13282,element:10960,viewParameter:n,objectId:t}),o&&o.start(),this.showFlyout())}),ee(this,"handleSaveClick",(async function(e){const{selectedItem:n}=t.props;n?(e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation(),Object(A.a)(101,{component:13282,element:36,objectId:n.boardId,grid_index:te}),await t.save(n)):t.handleBoardDropdownClick(e)})),ee(this,"setBoardWithSection",e=>{this.setState({boardWithSection:e})}),ee(this,"handleEditSubmit",({boardId:e,sectionId:t,url:n,title:o})=>{const{pin:{id:i},savedInfo:{localPinId:a}={}}=this.props;this.updateSavedState({pinId:i,localPinId:a,boardId:e,sectionId:t||"",url:n,title:o})}),ee(this,"resetPinSavedState",()=>{this.updateSavedState({boardId:"",localPinId:"",sectionId:"",title:"",url:""})}),ee(this,"deleteSavedState",()=>{const{unsave:e,onDelete:t,pin:{id:n}}=this.props;e({pinId:n}),t&&t()}),ee(this,"save",(async function(e){const{isLimitedLogin:n,mostRecentBoard:o,pin:{id:a},postRepinMoreIdeasUpsell:r,postRepinUpsellDisabled:s,save:l,setMostRecentBoard:c,showRepinAnimation:d,toastManagerContext:u}=t.props;t.updateSavedState(e);try{const{resource_response:{data:n}}=await t.getPinResource(e).callCreate({showError:!1}),p=e.url,{incrementBoardPinCount:h,updateUserPinCount:f,viewerUserId:m}=t.props;!s&&p&&q({boardId:e.boardId,boardUrl:p,postRepinMoreIdeasUpsell:r})&&u.showToast(({onHide:t})=>i.a.createElement($,{boardId:e.boardId,boardName:e.title,boardUrl:p,onHide:t})),l({pinId:a,...e,localPinId:n.id}),j.b.publish("currentUser","pinCreated",n),j.b.publish(n.board.id,"pinCreated",{pin:n}),h({boardId:e.boardId,sectionId:e.sectionId}),f(m),d(a),o&&e.boardId!==o.id&&c(e.boardId,e.title,e.url)}catch(p){n||g.a.showError(p.message_detail||p.message),t.resetPinSavedState()}})),ee(this,"hideFlyout",(e=!1)=>{const{onToggleFlyout:t}=this.props;this.setState({showBoardFlyout:!1}),t&&t(!1,e)})}componentDidMount(){const{onMount:e}=this.props;this.updateSelectedItem(),e&&e()}componentDidUpdate(e,t){this.updateSelectedItem()}getPinResource(e){const{carousel_data:t,location:n,previousHistory:o,pin:i}=this.props,a=t&&t.index,r=Object(v.a)(i,n,o)||`${i.tracking_params}~0`,s={description:i.description||"",link:i.link,title:i.title||"",clientTrackingParams:r,board_id:e.boardId||"",pin_id:i.id||"",image_base64:i.image_base64,is_buyable_pin:!1,is_removable:i.promoted_is_removable,carousel_slot_index:a||0,...e.sectionId?{section:e.sectionId}:{},...Object(X.a)(i)||{}};return C.a.create("RepinResource",s)}showFlyout(){const{onToggleFlyout:e}=this.props;this.setState({showBoardFlyout:!0}),e&&e(!0,!0)}render(){const{boardResource:e,onToggleModal:t,pin:n,renderPinSaveTooltip:o,renderSavedStatus:a,requestContext:r,savedInfo:s,selectedItem:l,unselectedText:c,useMasonryFlyout:d,variant:p,viewParameter:h}=this.props,{boardWithSection:g,showBoardFlyout:v,showRepinModal:S,sensitiveContentNotice:y,suggestedBoardTitle:b}=this.state,w=new O.c(r,"web_pinbettersave_legofication").enabled(),C=d?_:u.n,{carousel_data:E}=n,T=i.a.createElement(B.a,{boardResource:e,setBoardWithSection:this.setBoardWithSection,onItemChosen:this.handleItemChosen,onBoardCreate:this.handleBoardCreate,pin:n,requestContext:r});return i.a.createElement(m.a,{name:"PinBetterSave"},i.a.createElement(u.d,{width:"100%",display:"closeup"===p?"flex":void 0,height:w?48:"closeup"===p?44:void 0,color:w||"closeup"!==p?void 0:"lightGray",rounding:w||"closeup"!==p?void 0:4},(null==s?void 0:s.title)?i.a.createElement(R,{currentCarouselIndex:E&&E.index,onDeleteSavedState:this.deleteSavedState,onEditSubmit:this.handleEditSubmit,onToggleModal:t,pinId:s.localPinId,variant:p,viewParameter:h},a&&s&&a({savedInfo:s,variant:p})):i.a.createElement(f,{dropdownRef:this.dropdownRef,onBoardDropdownClick:this.handleBoardDropdownClick,onSaveClick:this.handleSaveClick,renderPinSaveTooltip:o,selectedTitle:l&&l.title,showSaveButton:!v,unselectedText:c,view:p,variant:w?"lego":"default"}),i.a.createElement(I,{additionalCreateFields:{is_stl_pin:Object(X.g)(n)},boardWithSection:g,action:"create",onClose:this.handleRepinHide,setCompletionPromise:this.setBoardSaveCompletionPromise,showModal:S,pin:n},({boardSavedTo:e,dismissModal:t,displaySuccessAnimation:n,handleAbort:o,handleNewBoardAnimationCompletion:a,handleSocialConnectSet:r,handleSaveToBoard:s,newPin:l,updateDescription:c,modalTitle:d,sectionSuggestions:u,setModalTitle:p,pin:h})=>i.a.createElement(V.b,{boardSavedTo:e,isInModal:!0,displaySuccessAnimation:n,dismissModal:t,handleAbort:o,handleNewBoardAnimationCompletion:a,handleSocialConnectSet:r,handleSaveToBoard:s,updateDescription:c,onBoardCreated:this.handleBoardCreated,sensitiveContentNotice:y,pin:h,pwtAuxData:{pin_create_method:"repin"},sectionSuggestions:u,suggestedBoardTitle:b,boardWithSection:g,shouldRenderContent:S,newPin:l,modalTitle:d,setModalTitle:p,showCreate:!0})),v&&"closeup"===p&&i.a.createElement(u.n,{anchor:this.dropdownRef.current,idealDirection:"down",onDismiss:this.hideFlyout,size:"lg"},T),v&&"pin"===p&&i.a.createElement(C,{anchor:this.dropdownRef.current,idealDirection:"down",onDismiss:this.hideFlyout,positionRelativeToAnchor:!d,size:"lg"},T)))}}ee(oe,"defaultProps",{variant:"pin",renderSavedStatus:({savedInfo:e,variant:t})=>i.a.createElement(ne,{savedInfo:e,variant:t})});t.default=i.a.memo(Object(P.compose)(Object(a.connect)(({location:e,history:t,mostRecentBoard:n,pins:o,ui:i,viewer:a},{pin:{id:r}})=>{const s=o[r],{postRepinMoreIdeasUpsell:l}=i;return{carousel_data:s&&s.carousel_data,previousHistory:t.previous,isLimitedLogin:a.isLimitedLogin,savedInfo:s&&s.savedInfo,selectedItem:s&&s.selectedItem,reduxLocation:e,postRepinMoreIdeasUpsell:l,mostRecentBoard:n,viewerUserId:a.id}},e=>({incrementBoardPinCount:({boardId:t,sectionId:n})=>e(Object(k.d)({boardId:t,sectionId:n,increment:1})),save:t=>e(Object(L.a)(t)),unsave:t=>e(Object(L.d)(t)),selectBoardOrSection:t=>e(Object(L.b)(t)),setMostRecentBoard:(t,n,o)=>e(Object(N.a)(t,n,o)),searchQueryInvalidated:t=>e(Object(M.b)(t)),showRepinAnimation:t=>e(Object(U.c)(t)),updateUserPinCount:t=>e(Object(W.b)({userId:t,increment:1}))})),J.c,Object(Z.c)({name:"BoardPickerBoardsResource",key:"boardResource",options:()=>({field_set_key:"board_picker"})}),Object(Z.c)({name:"BoardPickerBoardsShortlistResource",key:"suggestedBoardsShortListResource",options:e=>({pin_id:e.pin.id,shortlist_length:2,num_shortlist_suggestions:2,suggestions_only:!0,min_confidence:.5})}),K.a,d.e)((function(e){const{suggestedBoardsShortListResource:t,initialSelection:n,mostRecentBoard:o}=e,a=Object(Q.b)();if(n)return i.a.createElement(oe,Object.assign({},e,{boardPickerStopwatch:a,postRepinUpsellDisabled:!0,unselectedText:n.title}));const r=t&&t.data&&t.data[0];return i.a.createElement(u.d,{overflow:"hidden"},i.a.createElement(oe,Object.assign({},e,{boardPickerStopwatch:a,initialSelection:t&&t.isLoaded&&r&&{boardId:r.id,title:r.name,url:r.url}||t&&t.isLoaded&&!r&&o&&{boardId:o.id,title:o.name,url:o.url}||void 0,unselectedText:t&&t.isLoaded?c.a._("Select","BetterSave label to pick a board from the list","BetterSave label to pick a board from the list"):"..."})))})))},gIz7:function(e,t,n){n.d(t,"a",(function(){return a}));var o=n("A0Lk"),i=n.n(o);function a(e,t){if("undefined"==typeof window)return Promise.resolve();let n=document.querySelector(`#${t}`);if(n)return Promise.resolve();(n=document.createElement("style")).setAttribute("id",t),e.filter(e=>!!e.fontFaceUrl).forEach(e=>{n&&e.fontFaceUrl&&n.appendChild(document.createTextNode(`@import url('${e.fontFaceUrl}');`))});const o=document.head;if(!o)return Promise.resolve();const a=document.createElement("style");a.setAttribute("id",`${t}-font-faces`),o.appendChild(n),o.appendChild(a);const r=[];return e.forEach(e=>{e.styles.forEach(t=>{if(e.format&&t.fontUrl&&a&&a.sheet){a.sheet.insertRule(`\n            @font-face {\n              font-family: "${e.fontFamily}";\n              font-style: "${t.fontStyle}";\n              font-weight: "${t.fontWeight}";\n              src: url("${t.fontUrl}") format("${e.format}");\n            }`)}r.push(new i.a(e.fontFamily,{weight:t.fontWeight,style:t.fontStyle}).load())})}),Promise.all(r)}},jHGc:function(e,t,n){n.r(t),n.d(t,"PinRepEditButton",(function(){return l}));var o=n("q1tI"),i=n.n(o),a=n("Ye/N"),r=n("dtqy"),s=n("n6mq");function l({handlePinEditButtonClick:e,style:t,useLegoStyles:n=!1,usePersistentOneClickSaveStyles:o,wrappingIconStyle:r}){const l=i.a.createElement(s.r,{accessibilityLabel:a.a._("Edit","edit button on pin","edit button on pin"),bgColor:t&&t.bgColor||"white",icon:"edit",iconColor:t&&t.iconColor||"darkGray",onClick:({event:t})=>e(t),size:t&&t.size||"md"});return n||o?i.a.createElement("div",{style:{...r||{}}},l):l}t.default=Object(r.a)(l)},jZhD:function(e,t,n){n.d(t,"a",(function(){return r}));var o=n("q1tI"),i=(n("17x9"),n("pdBG"));function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class r extends o.Component{constructor(...e){super(...e),a(this,"searchCache",Object.create(null)),a(this,"lastSearchedQuery",null),a(this,"search",e=>{this.lastSearchedQuery=e,e in this.searchCache?this.props.onTypeaheadSuggestionsChange(this.searchCache[e],e):this.provider.search(e,({items:t})=>{this.searchCache[e]=t,e===this.lastSearchedQuery&&this.props.onTypeaheadSuggestionsChange(t,e)})})}componentDidMount(){const e=this.props.resourceOptions||{};this.provider=new i.a({resource_name:this.props.resourceName,...e});const{value:t}=this.props;null!=t&&this.props.allowSearchOnMount&&this.search(this.props.value)}UNSAFE_componentWillReceiveProps({value:e}){null!=e&&e!==this.props.value&&this.search(e)}render(){return this.props.children||null}}a(r,"defaultProps",{resourceName:"TypeaheadResource"})},"lm/5":function(e,t,n){var o=n("fmRc"),i=n("wF/u"),a=1,r=2;e.exports=function(e,t,n,s){var l=n.length,c=l,d=!s;if(null==e)return!c;for(e=Object(e);l--;){var u=n[l];if(d&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++l<c;){var p=(u=n[l])[0],h=e[p],f=u[1];if(d&&u[2]){if(void 0===h&&!(p in e))return!1}else{var m=new o;if(s)var g=s(h,f,p,e,t,m);if(!(void 0===g?i(f,h,a|r,s,m):g))return!1}}return!0}},lm6u:function(e,t,n){var o=n("q1tI"),i=n.n(o),a=n("/MKj"),r=n("1inl"),s=n("3z7j"),l=n("ajUs"),c=n("Ye/N");var d=n("TN0d"),u=n("eOdZ"),p=n("G35+"),h=n("CvCA"),f=n("Wrea"),m=n("fArA"),g=n("Vzit"),v=n("WnNx"),S=n("n6mq"),y=n("U4JR"),b=n("NjDU"),_=n("C0mq"),w=n("6G9P"),C=n("B6Tf"),O=n("oTtT"),E=n("nGHF"),T=n("oN2T");function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return k}));const x=/#[^(\-\\.\s#,\/$%\^&\*;:{}=\`~()\[\]@|<>…)]+/gi,R="236x";class B extends i.a.Component{constructor(...e){super(...e),I(this,"state",{boardSavedTo:null,displaySuccessAnimation:!1,newPin:null,modalTitle:this.props.showCreate?c.a._("Create board","Repin title for making a new board","Repin title for making a new board"):c.a._("Choose board","Repin title for choosing a board","Repin title for choosing a board")||"",pinDescription:this.props.pin&&this.props.pin.description||"",resolve:void 0,sharing:{facebook:!1,twitter:!1}}),I(this,"unmounted",!1),I(this,"setModalTitle",e=>this.safeSetState({modalTitle:e})),I(this,"updateDescription",e=>{this.safeSetState({pinDescription:e})}),I(this,"close",()=>{const{onClose:e,boardPickerStopwatch:t}=this.props;e&&e(),t&&t.abort("boardPickerClose"),Object(y.a)(2502,{component:5,element:610})}),I(this,"safeSetState",(e,t)=>{this.unmounted?t&&t():this.setState(e,t)}),I(this,"getPinResource",(e,t,n)=>{var o;const{color:i,location:a,pin:r,method:s,guid:c,additionalCreateFields:d,advertiser_id:p,previousHistory:h}=this.props;let f;r.id&&(f=Object(l.a)(r,a,h)||`${r.tracking_params}~0`);const m=r.id?"RepinResource":"PinResource",g=!r.id&&r.image_url?Object(w.b)(r.image_url,r.link):(null===(o=r.images.orig)||void 0===o?void 0:o.url)||"",v={...d,board_id:t||"",color:i||"",clientTrackingParams:f,description:this.state.pinDescription,guid:c||"",link:r.link,image_base64:r.image_base64,image_url:g,is_buyable_pin:!1,is_removable:r.promoted_is_removable,media_upload_id:r.media_upload_id,method:s||"",pin_id:r.id||"",section:n,title:r.title||"",...p?{advertiser_id:p}:{}};if(!e){const{facebook:e,twitter:t}=this.state.sharing;v.share_facebook=e,v.share_twitter=t}return u.a.create(m,v)}),I(this,"triggerPubSubs",e=>{d.a.instance.publish("currentUser","pinCreated",e),d.a.instance.publish(e.board.id,"pinCreated",{pin:e})}),I(this,"makeCancelablePromise",e=>{let t=!1;return{promise:new Promise((n,o)=>{e.then(e=>t?o({isCanceled:!0}):n(e)),e.catch(e=>o(t?{isCanceled:!0}:e))}),cancel(){t=!0}}}),I(this,"handleLogToastClick",()=>{Object(y.a)(101,{component:20,view:52})}),I(this,"showSuggestedBoardToast",(e,t,n,o)=>{const{toastManagerContext:a,shouldShowToast:r}=this.props;if(r&&e){const{name:t,url:n,image_thumbnail_url:o}=e;a.showOneToast(({onHide:e})=>i.a.createElement(h.a,{duration:C.a,onHide:e,text:i.a.createElement(i.a.Fragment,null,i.a.createElement(S.R,{color:"white"},c.a._("You might also like","Post repin suggested board","Post repin suggested board")),i.a.createElement(S.R,{color:"white",weight:"bold"},t)),href:n,imageUrl:o,onClick:this.handleLogToastClick}))}}),I(this,"showBoardSavedToast",(e,t)=>{const{toastManagerContext:n}=this.props;n.showToast(({onHide:n})=>i.a.createElement(h.a,{duration:C.a,onHide:n,text:Object(w.a)(e.name,t),href:t?`${e.url}${t.slug}`:e.url,imageUrl:e.image_cover_url,onClick:this.handleLogToastClick}))}),I(this,"dismissModal",e=>{const{resolve:t,newPin:n}=this.state;t&&t(n)}),I(this,"fetchBoardRecommendation",e=>{return u.a.create("RelatedBoardForPinRandomFeedResource",{pin:e.id,page_size:1}).callGet({showError:!1}).then(e=>Promise.resolve(e.resource_response.error?null:e.resource_response.data[0]))}),I(this,"handleBoardSaveSuccess",(e,t,n,o)=>{const{action:i,dispatch:a,hideSuccessAnimation:r,homeTakeoverExperience:l,pin:d,setCompletionPromise:u,shouldShowToast:p,viewerUserId:h}=this.props;a(Object(g.d)());const m=this.makeCancelablePromise(new Promise((s,d)=>{const u=e.resource_response.data;this.triggerPubSubs(u);const h=this.state.pinDescription.match(x)||[];h.length>0&&Object(y.a)(2,{element:10273,hashtags:JSON.stringify(h),objectId:this.props.pin.id});const f=r?()=>{}:()=>{p&&this.showBoardSavedToast(t,n),this.safeSetState({displaySuccessAnimation:!0,modalTitle:c.a._("Board created","Modal title after creating a new board","Modal title after creating a new board"),newPin:u,resolve:s})};"repin"===i?(this.fetchBoardRecommendation(u).then(e=>{this.showSuggestedBoardToast(e,u,n,o)}),o?f():s(u)):("create"===i&&l&&500840===l.experience_id&&(a(function(e){return{type:"PIN_CREATED_VIA_CREATOR_CHECKLIST",payload:{pin_created_via_creator_checklist:e}}}(!0)),Object(y.a)(7510,{component:13233})),o?f():s(u))}));if(o||a(Object(v.c)(d.id)),u(m),a(Object(T.c)(t)),a(Object(f.d)({boardId:t.id,sectionId:n&&n.id,increment:1})),h&&(a(Object(b.b)({userId:h,increment:1})),a(Object(g.d)())),n||!t.image_cover_url){const{image_url:e,images:n}=d;t.image_cover_url=e||n&&n[R]&&n[R].url||"",a(Object(T.d)({},t))}n&&a(Object(s.a)(n.id)),a(function(e,t,n,o,i){return{type:"PIN_SAVE",payload:{pinId:e,saved:t,boardId:n,title:o,url:i}}}(d.id,!0,t.id,t.name,t.url))}),I(this,"handleSaveToBoard",(e,t,n)=>{const{boardPickerStopwatch:o,onToggleModal:i,shouldShowToast:a}=this.props;o&&o.abort("boardPickerSubmit"),a&&!n&&(this.close(),this.showBoardSavedToast(e,t));const s="secret"===(e.privacy||""),l={board:t?t.id:e.id,state:C.c.LOADING};this.safeSetState({boardSavedTo:l},()=>{this.getPinResource(s,e.id,(t||{}).id).callCreate({showError:!1}).then(o=>{this.safeSetState({boardSavedTo:Object.assign(l,{state:C.c.SUCCESS})},()=>this.handleBoardSaveSuccess(o,e,t,n)),i&&!n&&i(!1)}).catch(e=>{this.unmounted||this.safeSetState({boardSavedTo:null}),r.a.showError(e.message_detail||e.message);const t=this.makeCancelablePromise(Promise.reject(e));this.props.setCompletionPromise(t),i&&i(!1)})})}),I(this,"handleSocialConnectSet",(e,t)=>{const n=Object.assign({},this.state.sharing);e===p.a.FACEBOOK?n.facebook=t:e===p.a.TWITTER&&(n.twitter=t),this.safeSetState({sharing:n})}),I(this,"handleNewBoardAnimationCompletion",()=>{const{dispatch:e,pin:t}=this.props;e(Object(v.c)(t.id))})}UNSAFE_componentWillReceiveProps(e){const{boardWithSection:t,showCreate:n}=this.props;this.safeSetState({pinDescription:e.pin&&e.pin.description||e.description||""}),t&&n?this.setModalTitle(c.a._("Create section","modal title for create section pane","modal title for create section pane")):t&&!n&&this.setModalTitle(c.a._("Choose section","modal title for choose section","modal title for choose section"))}componentWillUnmount(){this.unmounted=!0}render(){const{close:e,dismissModal:t,handleNewBoardAnimationCompletion:n,handleSaveToBoard:o,handleSocialConnectSet:i,setModalTitle:a,updateDescription:r}=this,{boardSavedTo:s,displaySuccessAnimation:l,modalTitle:c,newPin:d}=this.state,{color:u,pin:p}=this.props;return this.props.children({boardSavedTo:s,color:u,dismissModal:t,displaySuccessAnimation:l,handleAbort:e,handleNewBoardAnimationCompletion:n,handleSaveToBoard:o,handleSocialConnectSet:i,modalTitle:c,newPin:d,pin:p,setModalTitle:a,updateDescription:r})}}const k=Object(m.compose)(Object(a.connect)(e=>{const{advertiser:t,viewer:n,history:o}=e,i=n.isAuth&&t&&t.owner_user_id!==n.id?t.id:null,a=e.experiences.eligibleExperiences[11],r=e.experiences.eligibleExperiences[33];return{homeTakeoverExperience:a,previousHistory:o.previous,repinTakeoverExperience:r,...i?{advertiser_id:i}:{},...n.isAuth?{viewerUserId:n.id}:{}}}),E.c,_.a)((function(e){const t=Object(O.b)();return i.a.createElement(B,Object.assign({},e,{boardPickerStopwatch:t}))}))},"mVx/":function(e,t,n){var o=n("XKAG")(n("JELi"));e.exports=o},pdBG:function(e,t,n){var o=n("AHhP"),i=n.n(o);const a=function(e,t){this.uid=e,this.item=t,this.next=null,this.prev=null},r=function(e){this._maxNumItems=e||10,this._uidToData={},this._numItems=0,this._firstData=null,this._lastData=null};r.prototype.set=function(e,t){let n=this._uidToData[e];n||(n=new a(e,t),this._uidToData[e]=n,this._numItems+=1),this._moveToFront(n),this._numItems>this._maxNumItems&&this._evict()},r.prototype.get=function(e){const t=this._uidToData[e];return t?(this._moveToFront(t),t.item):null},r.prototype.remove=function(e){const t=this._uidToData[e];t&&(delete this._uidToData[e],this._firstData===t&&(this._firstData=t.next),this._lastData===t&&(this._lastData=t.prev),t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),this._numItems-=1)},r.prototype._moveToFront=function(e){this._firstData!==e&&(this._firstData?(this._lastData===e&&(this._lastData=e.prev),e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),this._firstData.prev=e,e.next=this._firstData,e.prev=null,this._firstData=e):(this._firstData=e,this._lastData=e))},r.prototype._evict=function(){delete this._uidToData[this._lastData.uid],this._firstData===this._lastData?(this._firstData=null,this._lastData=null):(this._lastData=this._lastData.prev,this._lastData.next=null),this._numItems-=1};var s=r,l=n("eOdZ"),c=n("mBfy");const d=function(e){e=e||{},this.tags=e.tags,this.enable_recent_queries=!!e.enable_recent_queries,this.minimum_term_character_length=e.minimum_term_character_length||0,this.bypass_lru_cache=e.bypass_lru_cache;const t={tags:e.tags,pin:e.pin_id},n=e.num_places;n?t.num_places=n:t.count="count"in e?e.count:5,e.exclude_non_followers&&(t.exclude_non_followers=!0),e.field_set_key&&(t.field_set_key=e.field_set_key),e.pin_scope&&(t.pin_scope=e.pin_scope),e.suggestion_type&&(t.suggestion_type=e.suggestion_type);let o="TypeaheadResource";e.resource_name&&(o=e.resource_name),this.searchResource=l.a.create(o,t),this.itemsCache=new s};Object.assign(d.prototype,i.a),Object.assign(d.prototype,{search(e,t){let n;if(!e&&"pinners_and_contacts"===this.tags)return this.abortSearch(),this.publishData(e,[],{},t);if(!e&&c.default.isLimitedLogin())return this.abortSearch(),this.publishData(e,[],{},t);if(!e&&this.enable_recent_queries&&c.default&&c.default.isAuthenticated())n="recent_search";else{const n=this.bypass_lru_cache?{}:this.itemsCache.get(e);if(n){const o=n.items;if(o&&o.length){this.abortSearch();const i=n.hint;return void this.publishData(e,o,i,t)}}}e.length>=this.minimum_term_character_length?this.fetch(e,n,t):this.publishData(e,[],{},t)},getResource(){return this.searchResource},abortSearch(){this.getResource().abort()},publishData(e,t,n,o){const i={term:e,items:t,hint:n};this.trigger("data",i),o&&o(i)},setAutocompleteScope(e){this.getResource().set("autocompleteScope",e)},fetch(e,t,n){const o=this.getResource();if(o.isCalling()){const t=o.get("term");if(e===t)return;this.abortSearch()}""!==this.tags&&(o.set("term",e),o.set("tags",t||this.tags),o.resetBookmark(),o.callGet({showError:!1}).then(t=>{const o=t.resource_response.data,i=o.items,a=o.hint||{},r={hint:a,items:i};this.cacheData(e,r),this.publishData(e,i,a,n)},e=>{this.trigger("fetchError",e)}),this.warm=!0)},removeCacheForTerm(e){this.itemsCache.remove(e)},cacheData(e,t){this.itemsCache.set(e,t)},prefetch(){if(this.warm)return;l.a.create("TypeaheadPrepareResource").callGet({showError:!1}),this.warm=!0}});t.a=d},"ut/Y":function(e,t,n){var o=n("ZCpW"),i=n("GDhZ"),a=n("zZ0H"),r=n("Z0cm"),s=n("+c4W");e.exports=function(e){return"function"==typeof e?e:null==e?a:"object"==typeof e?r(e)?i(e[0],e[1]):o(e):s(e)}},w70y:function(e,t,n){n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return f}));var o=n("q1tI"),i=n.n(o),a=n("/MKj"),r=n("lSCD"),s=n.n(r),l=n("aK+E"),c=n("zLLH"),d=n("y19s"),u=n("Wer7");const p={};function h({acceptPrefetch:e,allowStale:t,enabledRouteRefresh:n,dangerouslyDisableFetch:i,options:r,name:s,headers:h}){const f=Object(a.useDispatch)(),m=Object(l.a)(r),g=Object(o.useRef)(),v=e=>(e[s]||p)[m]||p,{isPrefetch:S,nextBookmark:y,prefetchHasBeenRead:b}=Object(a.useSelector)(({resources:e})=>v(e.data)),_=Object(a.useSelector)(({resources:e})=>v(e.data).data),w=Object(a.useSelector)(({resources:e})=>v(e.data).error),C=Object(a.useSelector)(({resources:e})=>Boolean((e.fetching[s]||p)[m])),O=Object(a.useSelector)(({resources:e})=>Boolean((e.data[s]||p)[m])),{history:E}=Object(d.b)(),T=E&&"POP"!==E.action,I=Boolean(O&&n&&T&&!i),[x,R]=Object(o.useState)(I);void 0===g.current&&O&&T&&e&&S&&!b&&!i&&f(Object(u.h)(s,r));const B=Object(o.useCallback)(()=>{i||f(Object(u.a)(s,r,h))},[i,f,h,s,m]),k=Object(o.useCallback)(()=>{i||f(Object(u.d)(s,r,h))},[i,h,s,m]),P=Object(o.useCallback)(()=>{i||(B(),R(!0))},[i,B,R]),D=Object(o.useRef)({data:void 0,error:void 0,fetchMore:k,isAtEnd:!1,isFetching:!1,isLoaded:!1,isPrefetch:void 0,isRefreshing:!1,nextBookmark:void 0,prefetchHasBeenRead:void 0,refreshData:P});Object(o.useEffect)(()=>{!1!==t&&O&&!I||B()},[]),Object(o.useEffect)(()=>{void 0!==g.current&&m!==g.current&&T&&B(),g.current=m},[m]);const j={data:_,error:w,fetchMore:k,isAtEnd:O&&!C&&y===c.a,isFetching:C,isLoaded:O,isPrefetch:S,isRefreshing:x,nextBookmark:y,prefetchHasBeenRead:b,refreshData:P};return Object(a.shallowEqual)(j,D.current)||(!x||I||Object(a.shallowEqual)(j.data,D.current.data)||(j.isRefreshing=!1,R(!1)),D.current=j),D.current}function f(e){const t=e.key;return function(n){function o(o){const{dangerouslyDisableFetch:a,options:r,key:l,...c}=e,d=h({...c,options:(s()(r)?r(o):r)||{},dangerouslyDisableFetch:!!a&&a(o)}),u={[t]:d};return i.a.createElement(n,Object.assign({},o,u))}return o.displayName=`withResourceExperimental[${e.name}](${n.displayName||n.name||""})`,o.WrappedComponent=n,o}}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/js/PinBetterSaveCommon-a54e8edf828e42a8f8b4.mjs.map